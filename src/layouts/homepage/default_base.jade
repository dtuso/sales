//- consider moving this data and the related mixin to a dedicated file (/src/layouts/homepage/bugBar.jade) 
//- if it gets unreadably long or if addition data/mixin sections are added
- var gtldData = [];
- gtldData["co"]    = { path: "/tlds/co-domain.aspx",  ci: 93296,  cssClass: "co",    productId: 56401,    tld:"co",    showIcannDisclaimer:false};
- gtldData["org"]   = { path: "/tlds/org.aspx",        ci: 93297,  cssClass: "org",   productId: 12101,    tld:"org",   showIcannDisclaimer:true};
- gtldData["net"]   = { path: "/tlds/net.aspx",        ci: 93298,  cssClass: "net",   productId: 12001,    tld:"net",   showIcannDisclaimer:true};
- gtldData["biz"]   = { path: "/tlds/biz.aspx",        ci: 94195,  cssClass: "biz",   productId: 11301,    tld:"biz",   showIcannDisclaimer:true};
- gtldData["club"]  = { path: "/tlds/club",            ci: 89153,  cssClass: "club",  productId: 172137,   tld:"club",  showIcannDisclaimer:true};
- gtldData["uno"]   = { path: "/tlds/uno",             ci: 88299,  cssClass: "uno",   productId: 40995,    tld:"uno",   showIcannDisclaimer:true};
- gtldData["br"]    = { path: "/tlds/br-domain",       ci: 88377,  cssClass: "br",    productId: 57201,    tld:"br",    showIcannDisclaimer:false};
- gtldData["in"]    = { path: "/tlds/in.aspx",         ci: 94304,  cssClass: "in",    productId: 9850,     tld:"in",    showIcannDisclaimer:false};
- gtldData["co-in"] = { path: "/tlds/in.aspx",         ci: 94302,  cssClass: "co-in", productId: 41000,    tld:"co.in", showIcannDisclaimer:false};
- gtldData["com"]   = { path: "/tlds/com.aspx",        ci: 94303,  cssClass: "com",   productId: 101,      tld:"com",   showIcannDisclaimer:true};
- gtldData["ca"]    = { path: "/tlds/ca.aspx",         ci: 94959,  cssClass: "ca",      productId: 9405,        tld:"ca",     showIcannDisclaimer:false};
- gtldData["quebec"]= { path: "/tlds/quebec",          ci: 94960,  cssClass: "quebec",  productId: 546605,      tld:"quebec", showIcannDisclaimer:false};

mixin gtldBug(gtld)
  a.tld-link(class=gtldData[gtld].cssClass href!="[@T[link:<relative path='" + gtldData[gtld].path + "'><param name='ci' value='" + gtldData[gtld].ci + "' /><param name='tld' value='" + gtldData[gtld].tld + "' /></relative>]@T]")
    span.hp-sprite(class=gtldData[gtld].cssClass)
    span.price!= "[@T[productprice:<current productid='" + gtldData[gtld].productId + "' dropdecimal='false' period='yearly' htmlsymbol='false' negative='parentheses' promocode='444888'/>]@T]"
    if gtldData[gtld].showIcannDisclaimer 
      span.icann-disclaimer *

doctype html
html(lang!="[@T[localization:<language full='true' />]@T]")

  head
    meta(http-equiv="content-type" content="text/html; charset=utf-8")
    meta(http-equiv="content-language" content!="[@T[localization:<language full='true' />]@T]")
    meta(name="google-site-verification" content="odAW2IckEFXrJjMrVxmnpjRPGNxEJp_xnCb7iBydgBY")
    meta(name="msvalidate.01" content="9D246CEFA0D8894D78306DF6FBA618D9")
    link(href="https://plus.google.com/108306343581548568740" rel="publisher")
    meta(name="verify-v1" content="dV1r/ZJJdDEI++fKJ6iDEl6o+TMNtSu0kv18ONeqM0I=")
    meta(name="y_key" content="1e39c508e0d87750")
    title [@L[cds.sales/homepage:page-title]@L]
    meta(name="description" content!="[@L[cds.sales/homepage:meta-description]@L]")
    meta(name="keywords" content!="[@L[cds.sales/homepage:meta-keywords]@L]")
    meta(name="format-detection" content="telephone=no")
    meta(property="og:title" content!="[@L[cds.sales/homepage:og-title]@L]")
    meta(property="og:type" content="website")
    meta(property="og:url" content!="[@T[link:<relative parammode='explicit' />]@T]")
    meta(property="og:image" content!="[@T[link:<imageroot />]@T]fos/hp/rebrand/img/gd_rebrand_og.png")
    meta(property="og:site_name" content="GoDaddy")
    meta(property="fb:app_id" content="115696031791232")
    meta(property="fb:admins" content="633356800")
    meta(property="og:description" content!="[@L[cds.sales/homepage:og-content]@L]")
    link(rel="canonical" href!="[@T[link:<external linktype='siteurl' path='' parammode='explicit'/>]@T]")
    link(rel="shortcut icon" href!="[@T[link:<imageroot />]@T]assets/godaddy.ico")
    link(href!="[@T[link:<cssroot />]@T]fos/201401/global/css/global-1.8.3.min.css" rel="stylesheet" type="text/css")
    | 
    | [@P[cdsDocument:<data app="sales" location="fonts/fonts" /> ]@P]
    style.
      .uk-cookie-banner{background: #8a8a8a; color: #fff; font-size: 12px; padding: 10px;position:fixed;bottom:0;width: 100%;z-index:999}
      .uk-cookie-banner a{color:#fff;text-decoration: underline}
      .uk-cookie-banner span {display:block}
      .uk-cookie-banner i {background-image: url([@T[link:<imageroot />]@T]fos/base/1/alerts.png)}
      .uk-cookie-ico{background-position: 0 0;height:20px;display: block;float: left;margin: 10px;width: 20px}
      .uk-cookie-wrap{margin: 0 auto;width: 1000px}
      .uk-cookie-close{background-position: 4px -228px;cursor:pointer;height: 20px;display: block;position: absolute;top:10px;right:25px;margin: 10px;width: 20px}
      .tungsten{font-family: Tungsten, 'Tungsten A', 'Tungsten B', 'Helvetica Neue', 'Segoe UI', Segoe, Helvetica, Arial, 'Lucida Grande', sans-serif;font-weight:700}
      .walsheim-black{font-family:'Walsheim-Black';}
      .hp-sprite { background: url([@T[link:<imageroot />]@T]fos/hp/rebrand/img/gdhp_sprite_legacy-20141120.png) scroll no-repeat; vertical-align: top; }
      .hp-sprite.co { background-position:-74px -0px; height:19px; width:19px; vertical-align: top; margin-right: 8px;}
      .hp-sprite.org { background-position:-330px -6px; width: 37px; height: 13px; margin-top: 5px; }
      .hp-sprite.club { background-position:-236px -5px; width: 39px; height: 11px; margin-top: 5px; }
      .hp-sprite.uno { background-position:-98px 0; width: 19px; height: 19px; }
      .hp-sprite.br { background-position:-120px 0; width: 14px; height: 19px; }
      .hp-sprite.net { background-position:-244px -572px; width: 34px; height: 13px; margin-top:2px;}
      .hp-sprite.in { background-position:-502px -570px; width: 38px; height: 22px; }
      .hp-sprite.co-in { background-position:-502px -570px; width: 38px; height: 22px; }
      .hp-sprite.com { background-position:-647px -578px; width: 54px; height: 13px; }
      .hp-sprite.biz { background-position:-734px -570px;width: 35px;height: 24px;}
      .hp-sprite.ca { background-position:-655px -260px;width: 30px;height: 16px;}
      .hp-sprite.quebec { background-position:-695px -260px;width: 48px;height: 16px;}
      .gtld-links a { font-size: 14px; color: #333; margin-right: 30px; display: inline-block; }
      .gtld-links span { display: inline-block; }
      .gtld-links a:hover>.price{text-decoration:underline}
      .gtld-links .hp-sprite { margin-right: 8px; }
      

    | 
    | [@P[webControl:<Data assembly="App_Code" type="WebControls.PresentationCentral.HeadTags" />]@P]

    block styles
      link(href!="[@T[link:<cssroot />]@T]fos/hp/rebrand/css/homepage20141208.css" rel="stylesheet" type="text/css")

    script(src!="[@T[link:<javascriptroot />]@T]shared/js/1.8.0/global.20120918.min.js" type="text/javascript")

  body
    | 
    | [@P[webControl:<Data assembly="App_Code" type="WebControls.PresentationCentral.Header" />]@P]

    //  Domain Search Section
    block domainSearch
      .gdhp-search-section
        .gdhp-main-top
          form.search-form.search-form-alternate.search-form-certified(method="post" data-url!="[@T[link:<relative path='~/api/dpp/search/single'/>]@T]" action!="[@T[link:<relative path='/domains/searchresults-new.aspx'/>]@T]")
            .gdhp-search-box
              input.search-form-input.searchInput.helveticafont(type="text" id="searchDomainName" name="domainToCheck" autocomplete="off" maxlength="63" title!="[@L[cds.sales/homepage:sb-search-title]@L]")
              button.btn.btn-primary.btn-lg.hp-search(type="submit" name="searchButton" data-ci="54814") [@L[cds.sales/homepage/segments/default:domain-banner-search-btn]@L]
            .clearfix
      

    // Marquee Section
    block marquee
      |  ##if(targetMessageTagAny(sales_hp_default,hp_existing_customer))
      |   [@P[cdsDocument:<data app="sales" location="homepage/marquee/499com/default_template" /> ]@P]
      |  ##else
      |    ##if(splitTestingSideIsActive(1407, A) && !hasISC())
      |      [@P[cdsDocument:<data app="sales" location="homepage/marquee/499com/default_template" /> ]@P]
      |    ##else
      |      [@P[cdsDocument:<data app="sales" location="homepage/marquee/gtld/default_template" /> ]@P]
      |    ##endif
      |  ##endif

    // Bugbar (and social links) Sections
    .top-banner-lower-content
      .top-lower-content
        span.gtld-links
          block bugBar
            +gtldBug("co")
            +gtldBug("org")
        .gdhp-share
          block share
            .fosshare(data-twshareurl!="[@T[link:<relative path=''></relative>]@T]" data-twtext!="[@L[cds.sales/homepage:twitter-text-gdbl]@L]" data-twrelated="GoDaddy" data-shareurl!="[@T[link:<relative path='/'/>]@T]" data-buttons="google,facebook,twitter")

    // Tiles Section
    block tiles
      atlantis:webstash(type="css")
        style.
          .gdhp-tile-wrap{height:580px;width:100%;background-color:#d4d4d4}
          .gdhp-tile-area{width:1000px;margin:0 auto}
          .gdhp-tile{width:480px;height:480px;background-color:#fff;float:left;margin:40px 10px 0;cursor:pointer;}
          .gdhp-tile span{display:block;}
          .gdhp-tile .btn-lrg{font-size:24px;padding:14px 12px;box-sizing:border-box;height:60px;width:240px;}
          .gdhp-tile .btn-orange{color:#fff;background-color:#f5811f;border-bottom:4px solid #b25e18;}
          .gdhp-tile .btn-orange:hover{background-color:#ff9b39;border-color:#cc7832}
          .tile-sprite{background:url([@T[link:<imageroot />]@T]fos/hp/rebrand/img/gdhp_tile_sprite_20141205.png) scroll no-repeat;}
      .gdhp-tile-wrap
        .gdhp-tile-area
          block primaryTile
            //- include ../../sales/homepage/tiles/hosting.jade
            | 
            | [@P[cdsDocument:<data app="sales" location="homepage/tile/hosting-old-brand/default_template" /> ]@P]
          block secondaryTile
            #tile-container-30-percent-gtld
              //- include ../../sales/homepage/tiles/30-percent-gtld.jade
              | 
              | [@P[cdsDocument:<data app="sales" location="homepage/tile/30-percent-gtld/default_template" /> ]@P]
            #tile-container-why-wsb(style="display:none;")
              //- include ../../sales/homepage/tiles/why-wsb.jade
              | 
              | [@P[cdsDocument:<data app="sales" location="homepage/tile/why-wsb/default_template" /> ]@P]
            script(type="text/javascript").
              if ($('#gtld').length) {
                $('#tile-container-30-percent-gtld').hide();
                $('#tile-container-why-wsb').show();
              }
      #myVideoModal.modal.fade.videoModal.js-gdhpclick(data-url="video-close")
        .modal-dialog
          .modal-content
            .modal-header
              button.modal-header-close.close(type="button",data-dismiss="modal",aria-hidden="true") &times;
            .modal-body
              iframe(width="854",height="480",src="",autoplay,scrolling="no",frameborder="0",allowfullscreen)
    
    // Lower Marquee Section
    block lowerMarquee
      .gdhp-bottom-banner
        .bottom-banner-content
          span.bottom-banner-headline-2 [@L[cds.sales/homepage/segments/default:bottom-banner-headline-INTL]@L]
          span.bottom-banner-subtext-2.b [@L[cds.sales/homepage/segments/default:bottom-banner-subtext-INTL]@L]
        .bottom-banner-search
          form.search-form.search-form-certified(method="post" data-url!="[@T[link:<relative path='~/api/dpp/search/single'/>]@T]" action!="[@T[link:<relative path='/domains/searchresults-new.aspx'/>]@T]")
            .gdhp-search-box2
              input#searchDomainName2.search-form-input.searchInput.helveticafont(type="text" name="domainToCheck" autocomplete="off" maxlength="63" title!="[@L[cds.sales/homepage:sb-search-title]@L]")
              button.btn.btn-primary.btn-lg.hp-search(type="submit" name="searchButton" data-ci="87137") [@L[cds.sales/homepage/segments/default:domain-banner-search-btn]@L]
            .clearfix

    // Why Us Section
    block whyUs
      .why-us-wrap
        .why-us-content
          .why-us-headline-wrap
            span.why-us-headline.b.condensed [@L[cds.sales/homepage/segments/default:whyus-text-area]@L]
          .why-us-circles
            ul
              li
                .circle1
                .circle-text [@L[cds.sales/homepage:whyus-img-text-1]@L]
              li
                .circle2
                .circle-text [@L[cds.sales/homepage:whyus-img-text-2]@L]
              li
                .circle3
                .circle-text [@L[cds.sales/homepage:whyus-img-text-3]@L]
              li
                .circle4
                .circle-text [@L[cds.sales/homepage:whyus-img-text-4]@L]

    // FAQ Section
    block faq
      #faqSlider
        .gd-nav-container
          .gd-swipe(data-gd-swipe="{'auto':0}")
            .gd-swipe-wrap
              .gd-swipe-item
                .gd-swipe-head
                  h2 [@L[cds.sales/homepage:faq-slide-1-title]@L]
                .gd-swipe-body [@L[cds.sales/homepage:faq-slide-1-content]@L]
              .gd-swipe-item
                .gd-swipe-head
                .gd-swipe-body [@L[cds.sales/homepage:faq-slide-2-content]@L]
              .gd-swipe-item
                .gd-swipe-head
                  h2 [@L[cds.sales/homepage:faq-slide-3-title]@L]
                .gd-swipe-body [@L[cds.sales/homepage:faq-slide-3-content]@L]
              .gd-swipe-item
                .gd-swipe-head
                .gd-swipe-body [@L[cds.sales/homepage:faq-slide-4-content]@L]
          a.arrow-left(href="#" data-slide="prev" data-ci="84408")
            i.ico.ico-carousel-arrow-left
          a.arrow-right(href="#" data-slide="next" data-ci="84409")
            i.ico.ico-carousel-arrow-right
          .gd-swipe-bottom-nav

    // Disclaimers Section
    block disclaimers
      #disclaimers
        section.container.l-main-container.content-disclaimer
          p.no-margin-bottom
            a.simple-link(href="#" data-toggle="modal" data-target="#myModal" data-ci="86765") [@L[cds.sales/homepage:disclaimer-text]@L]
        #myModal.modal.fade
          .modal-dialog
            .modal-content
              .modal-header
                button.close(type="button" data-dismiss="modal" aria-hidden="true") &times;
                p.modal-title
                  strong [@L[cds.sales/homepage:disclaimer-modal-title]@L]
              .modal-body
                .g-modal-content
                  p [@L[cds.sales/homepage:disclaimer-modal-first-content]@L]
                  p [@L[cds.sales/homepage:disclaimer-modal-third-content]@L]
                  p [@L[cds.sales/homepage:disclaimer-modal-fourth-content]@L]

    // EU Cookie Warning Section
    block cookieWarning
      .uk-cookie-banner
        .uk-cookie-wrap
          i.uk-cookie-ico
          | [@L[cds.sales/homepage:eu-cookie-disclaimer]@L]
        i.uk-cookie-close

    | 
    | [@P[webControl:<Data assembly="App_Code" type="WebControls.PresentationCentral.Footer" />]@P]
    | [@P[webControl:<Data assembly="App_Code" type="WebControls.PresentationCentral.Script" />]@P]
    | [@P[webControl:<Data assembly="App_Code" type="WebControls.PresentationCentral.Bottom" />]@P]

    // End Main Content
    block scripts
      script(src!="[@T[link:<javascriptroot />]@T]fos/hp/rebrand/js/bigtext.min.js")
      script(src!="[@T[link:<javascriptroot />]@T]fos/script/sales17.min.js" type="text/javascript")
      script(src!="[@T[link:<javascriptroot />]@T]fos/hp/rebrand/js/homepage_script_20140410.min.js" type="text/javascript")
      script(src!="[@T[link:<javascriptroot />]@T]fos/script/atlantis_jquery14.min.js" type="text/javascript")
      script(src!="[@T[link:<javascriptroot />]@T]shared/js/jquery.plugins.min.20111019.js" type="text/javascript")
      script(src!="[@T[link:<javascriptroot />]@T]fos/lib/gd-swipe/js/swipe-v2.2.min.js" type="text/javascript")
      script(src!="[@T[link:<javascriptroot />]@T]fos/lib/gd-swipe/js/gd-swipe-v2.min.js" type="text/javascript")
      script(src!="[@T[link:<javascriptroot />]@T]starfield/fos.share/v1.3/fos.share-20140505.min.js" id="fosShareScript")
      script(src!="[@T[link:<javascriptroot />]@T]fastball/js_lib/FastballLibrary0006.min.js?version=2" type="text/javascript")
      script(src!="[@T[link:<javascriptroot />]@T]fos/201401/global/vendor/bootstrap/js/bootstrap.min.js" type="text/javascript")
      script(type="text/javascript").
        $(document).ready(function() {
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&'),
        qs = [],
        date = new Date();
        for(var i = 0; i < hashes.length; i++) {
        var hash = hashes[i].split('=');
        qs.push(hash[0]);
        qs[hash[0]] = hash[1];
        }
        $('#shareme').fosShare({});
        if($("#searchDomainName").val().length) {
        $("#searchDomainName").val("");
        }
        $(".gdhp-search-box2").gdhpDomainSearch({
        'domainInputId': '#searchDomainName2',
        'tldInputId': '#searchTldName2',
        'tldToggleId': '#searchTldToggle',
        'tldListId': '#searchTldList',
        'searchButton': '#domainSearchAction2',
        'searchUrl': '[@T[link:<relative path='/domains/search.aspx'><param name='ci' value='54814' /></relative>]@T]',
        'idnUrl': '[@T[link:<relative path='/domains/search.aspx'><param name='ci' value='82474' /></relative>]@T]',
        'domainInputLabelText': '[@L[cds.sales/homepage/segments/default:domain-banner-search-text]@L]',
        'focusOnLoad' : false
        });
        $(".gdhp-search-box").gdhpDomainSearch({
        'domainInputId': '#searchDomainName',
        'tldInputId': '#searchTldName',
        'tldToggleId': '#searchTldToggle',
        'tldListId': '#searchTldList',
        'searchButton': '#domainSearchAction',
        'searchUrl': '[@T[link:<relative path='/domains/search.aspx'><param name='ci' value='54814' /></relative>]@T]',
        'idnUrl': '[@T[link:<relative path='/domains/search.aspx'><param name='ci' value='82474' /></relative>]@T]',
        'domainInputLabelText': '[@L[cds.sales/homepage/segments/default:domain-banner-search-text]@L]'
        });
          $('.search-form').on('submit', function (e){
                e.preventDefault();

                $('button[name="searchButton"]', this).addClass('disabled');

                var params = {
                    query:$(this).serialize(),
                    searchUrl:$(this).attr('data-url')
                };
                DomainSearch(params,function(err,NextStepUrl){
                    if(typeof NextStepUrl === 'undefined')
                    {
                      NextStepUrl = '[@T[link:<relative path="/domains/search-new.aspx"></relative>]@T]';
                    }
                    if(err == null )
                    {
                        window.location = NextStepUrl;
                    }
                    else{
                        if(console != "undefined")
                        console.log(err);
                    }
                });
            });

            function DomainSearch(params, cb) {
                  $.ajax({
                    url: params.searchUrl,
                    type: 'POST',
                    data: params.query,
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                      var data = { Error: errorThrown, Success: false };
                      cb(errorThrown,null);
                    },
                    success: function (data) {
                      cb(null,data.NextStepUrl);
                    }
                  });
            }
          $("#disclaimers > p > a").click(function () {
                $("#g-modal").modal({
                  overlayId: "g-modal-overlay",
                  close: "false", // disables default close button
                  autoPosition: "true"
                });
              });
              $(".g-modal-close").click(function () {
                // Closes the last modal
                $.modal.close();
              });
        });
        $('.uk-cookie-close').click(function() {
              $('.uk-cookie-banner').css("display","none");
              var CookieDate = new Date;
              CookieDate.setFullYear(CookieDate.getFullYear( ) +10);
              document.cookie = 'uk_banner=closed; expires=' + CookieDate.toGMTString( ) + '; path=/';
              })
        if (document.cookie.indexOf("uk_banner") >= 0) {
               $('.uk-cookie-banner').css("display","none"); 
               } else {
               $('.uk-cookie-banner').css("display","block");
               }     
        if(navigator.userAgent.match(/iPad|iPhone|iPod/i)) {
        $('head').append('<meta name="viewport" content="width=1150px">');
        }
        $('body').on('click','.js-gdhpclick',function(event){
          var $clickedElement = $(event.currentTarget);
          var $clickedUrl = $clickedElement.attr('data-url'); 
          event.stopPropagation();
          switch($clickedUrl)
          {
            case "video":
               $('div#myVideoModal').modal('show');
            break;
            case "none":
            break;
            case "video-close":
              $('div#myVideoModal').modal('hide');
            break;
            default:
              window.location.href=$clickedUrl;
          }
        });
        $(window).load(function () {
          $('.bigtext').bigtext().css('visibility', 'visible');
          setTimeout( "$('.bigtext').bigtext().css('visibility', 'visible');",500 );
        });
