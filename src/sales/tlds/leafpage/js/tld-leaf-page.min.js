gbl.ns.register("domains.controls"),domains.controls.cds_gtld_templates||(domains.controls.cds_gtld_templates=function(){"use strict";function t(){$("#shareme").fosShare()}function e(){$(".g-modal-close").click(function(){$.modal.close()}),$("#limitations > p > a").click(function(){$("#g-modal").modal({overlayId:"g-modal-overlay",close:"false",autoPosition:"true"})})}function a(t){var e=decodeURI((RegExp(t+"=(.+?)(&|$)").exec(location.search)||[,null])[1]);return"null"==e&&(e=void 0),e}function n(){function t(){var t=n.val();""!==t&&t!==r&&(t.indexOf(".")>-1&&$("#tld").val(""),e.submit())}"undefined"!=typeof a("mgrshopper")&&$("#gtld-domain-search-form #mgrshopper").val(a("mgrshopper"));var e=$("#gtld-domain-search-form"),n=$("#gtld-domain-search-input"),r=n.attr("placeholder");"undefined"==typeof r&&(r=""),n.keypress(function(e){13===e.which&&(e.preventDefault(),t())});var o=$("#gtld-domain-search-btn");o.attr("href","javascript:void(0)").bind("click",t)}function r(){var t=$("#watch-button"),e=function(){t.text(w.watchButtonUnfollow)},a=function(){t.text(w.watchButtonFollowing)};x===!0?t.text(w.watchButtonFollowing).mouseenter(e).mouseleave(a):t.text(w.watchButtonFollow).unbind().click(o)}function o(){g()===!0?x===!1?c():d():l(D,!1)}function i(){var t=!1;$.ajaxSetup({async:!1});var e=u(w.watchDataUrl,"act=10&name="+encodeURIComponent(w.gtld));return $.getJSON(e,function(e){e&&(t=e)}),$.ajaxSetup({async:!0}),t}function l(t,e){S?s(t,e):$.get(w.watchAuthUrl+"/modalinit.aspx?version=7",function(a){var n=$("#"+t);0==n.length&&(n=$("<div>",{id:t}),n.prependTo("body")),n.html(a.content),$.getScript(a.scripts[0],function(){S=new idp.login.modal,s(t,e)})},"jsonp")}function s(t,e){S&&S.launchModal({elementName:t,idpContentUrl:w.watchAuthUrl+"/login.aspx?version=7&spkey="+w.ssoSpkey,launchCreateAccount:e,ciCodes:{li_submit:"82916",li_signup:"82915",li_help:"82914",li_launch:"82909",li_close:"82912",ca_submit:"82913"},successCallback:function(t){if(t){var e=$("#pc-login-wrapper"),a=$("#pc-logout-wrapper");e&&a&&(e.toggle(!t.IsValid),a.toggle(t.IsValid)),x=i(),x===!1?c():r()}},reloadData:!1})}function c(){var t=u(w.watchDataUrl,"act=3&name="+encodeURIComponent(w.gtld));$.getJSON(t,function(t){x=t===!0,r()})}function d(){var t=u(w.watchDataUrl,"act=4&name="+encodeURIComponent(w.gtld));$.getJSON(t,function(t){x=t!==!0,r()})}function u(t,e){var a="?";return t.indexOf("?")>=0&&(a="&"),t+a+e}function g(){var t=!1;$.ajaxSetup({async:!1});var e=w.relativePcDataSetUrl;return $.getJSON(e,function(e){e&&(t=e.pcIsTrusted)}),$.ajaxSetup({async:!0}),t}function p(t){if("undefined"==typeof w.gTldPreRegPhaseDataJson)return null;var e=$.grep(w.gTldPreRegPhaseDataJson,function(e){return e.Code.substring(0,2).toLowerCase()===t.substring(0,2).toLowerCase()});return 0==e.length?null:e[0]}function h(t){if("undefined"==typeof w.gTldPreRegPhaseDataJson)return null;var e=$.grep(w.gTldPreRegPhaseDataJson,function(e){return e.Code.toLowerCase()===t.toLowerCase()});return 0==e.length?null:e[0]}function m(t){return"undefined"==typeof t||null===t?"nill":"undefined"==typeof t.Prices||null===t.Prices?"null":"undefined"!=typeof t.Prices.TotalCurrent?t.HasIcannFee?(("GA"==t.Code||"ga"==t.Code)&&$("#tld-pricetagline").append('<span> <strong style="text-decoration:line-through">'+t.Prices.TotalList+"</em>*</strong>"),t.Prices.TotalCurrent+"*"):(("GA"==t.Code||"ga"==t.Code)&&$("#tld-pricetagline").append('<span> <strong style="text-decoration:line-through">'+t.Prices.TotalList+"</em></strong>"),$("#limitations-wrap").remove(),t.Prices.TotalCurrent):"undefined"!=typeof t.Prices.TotalList?t.HasIcannFee?t.Prices.TotalList+"*":($("#limitations-wrap").remove(),t.Prices.TotalList):"missing"}function f(){if(w.tldLogoImageExists===!0){var t=w.tldLogoFileName.split("|");t.length>1&&w.isEnMarket===!1?$("#gtld-logo > img").attr("src",w.tldLogoImageFilePath+t[1]):$("#gtld-logo > img").attr("src",w.tldLogoImageFilePath+t[0])}else $("#gtld-logo").hide()}function v(){var t=w.tldH1TagExists!==!0;return t&&(window.location=w.redirectUrl),t}var w={},y={gtld:"com",ssoSpkey:"",tldLogoImageExists:!0,tldLogoImageFilePath:"",hasProductLimitations:!0,watchAuthUrl:"http://example.com/endpointAuth.asmx",watchDataUrl:"http://example.com/endpointData.asmx",watchButtonFollow:"Follow",watchButtonFollowing:"Following",watchButtonUnfollow:"Unfollow",watchErrorMsg:"Unable to change your following status at this time.",gTldPreRegPhaseDataJson:[],$lrEarlyAccessDiv:$("#lr-earlyaccess"),$lrNotEarlyAccessDiv:$("#lr-not-earlyaccess"),tldH1TagExists:!0,tldMarketingContentTagExists:!0,isEnMarket:!1,tldLogoFileName:""},x=!1,S=null,D="gtld-modalHtmlContent",P={BEFORE:1,DURING:2,CLOSED:3};$("#tld-priceline span:nth-child(2)").remove(),this.Initialize=function(a){w=$.extend({},y,a),f(),t(),e()},this.SetupGeneralAvailability=function(){if(!v()){n();var t=p("ga"),e=m(t);$("#ga-head-price").html(e),$("#tld-pricetagline,#tld-priceline").show()}},this.SetupPreReg=function(){if(!v()){n();var t=p("ga");$("#div-ga-pre-registration").show(),$("#ga-dates-before").hide(),$("#ga-dates-during").hide();var e=m(t);$("#ga-price").html(e),$("#pre-reg-price").html(e),$("#tld-pricetagline,#tld-priceline").show();var a=p("lr");if(null===a||a.Status===P.CLOSED){var r=null!=p("er");if(r){for(var o="",i=!1,l=1;5>=l;l++){var s=h("er"+l);if(s&&s.Status!=P.CLOSED){var c=m(s),d=s.LiveStartDate+" "+s.LiveStartTime;o+=w.earlyAccessPricingTemplate.replace("{0}",l).replace("{1}*",c),o+=w.earlyAccessDateTemplate.replace("{0}",d),i=!0}}o.length>0&&(w.$lrEarlyAccessDiv.html(o).show(),w.$lrNotEarlyAccessDiv.hide()),i&&$("#div-lr-priority").show()}else $("#div-lr-priority").hide()}else $("#lr-dates-before").hide(),$("#prereg-lr-before").text(a.StartDate+" "+a.StartTime),$("#prereg-lr-during").text(a.EndDate+" "+a.EndTime),$("#lr-price").html(m(a)),$("#div-lr-priority").show();var u=p("sr");null===u||u.Status===P.CLOSED?$("#div-sr-trademark").hide():($("#sr-dates-before").hide(),$("#sr-dates-during").hide(),$("#prereg-sr-before").text(u.StartDate+" "+u.StartTime),$("#prereg-sr-during").text(u.EndDate+" "+u.EndTime),$("#sr-price").html(m(u)),$("#div-sr-trademark").show()),$("#ga-price-dur, #sr-price-dur , #lr-price-dur").remove()}},this.SetupWatch=function(){v()||($.ajaxSetup({cache:!1}),g()===!0&&(x=i()),$("#watch-button").show().click(o),r())}}),domains.controls.gtldTemplatesClient=new domains.controls.cds_gtld_templates;