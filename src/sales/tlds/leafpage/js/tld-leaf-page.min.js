gbl.ns.register("domains.controls");if(!domains.controls.cds_gtld_templates){domains.controls.cds_gtld_templates=function(){var s={},e={gtld:"com",ssoSpkey:"",tldLogoImageExists:true,tldLogoImageFileName:"",hasProductLimitations:true,watchAuthUrl:"http://example.com/endpointAuth.asmx",watchDataUrl:"http://example.com/endpointData.asmx",watchButtonFollow:"Follow",watchButtonFollowing:"Following",watchButtonUnfollow:"Unfollow",watchErrorMsg:"Unable to change your following status at this time.",gTldPreRegPhaseDataJson:[],$lrEarlyAccessDiv:$("#lr-earlyaccess"),$lrNotEarlyAccessDiv:$("#lr-not-earlyaccess"),tldH1TagExists:true,tldMarketingContentTagExists:true},l=false,o=null,n="gtld-modalHtmlContent",q={BEFORE:1,DURING:2,CLOSED:3};function v(){$("#shareme").fosShare()}function t(){$(".g-modal-close").click(function(){$.modal.close()});$("#limitations > p > a").click(function(){$("#g-modal").modal({overlayId:"g-modal-overlay",close:"false",autoPosition:"true"})})}function i(B){var C=decodeURI((RegExp(B+"=(.+?)(&|$)").exec(location.search)||[,null])[1]);if(C=="null"){C=undefined}return C}function u(){function F(){var G=C.val();if(G===""||G===E){return}if(G.indexOf(".")>-1){$("#tld").val("")}D.submit()}if(typeof i("mgrshopper")!="undefined"){$("#gtld-domain-search-form #mgrshopper").val(i("mgrshopper"))}var D=$("#gtld-domain-search-form"),C=$("#gtld-domain-search-input"),E=C.attr("placeholder");if(typeof E=="undefined"){E=""}C.keypress(function(G){if(G.which===13){G.preventDefault();F()}});var B=$("#gtld-domain-search-btn");B.attr("href","javascript:void(0)").bind("click",F)}function w(){var B=$("#watch-button");var C=function(){B.text(s.watchButtonUnfollow)};var D=function(){B.text(s.watchButtonFollowing)};if(l===true){B.text(s.watchButtonFollowing).mouseenter(C).mouseleave(D)}else{B.text(s.watchButtonFollow).unbind().click(A)}}function A(B){if(k()===true){if(l===false){a()}else{r()}}else{x(n,false)}}function m(){var B=false;$.ajaxSetup({async:false});var C=b(s.watchDataUrl,"act=10&name="+encodeURIComponent(s.gtld));$.getJSON(C,function(D){if(D){B=D}});$.ajaxSetup({async:true});return B}function x(B,C){if(!o){$.get(s.watchAuthUrl+"/modalinit.aspx?version=7",function(D){var E=$("#"+B);if(0==E.length){E=$("<div>",{id:B});E.prependTo("body")}E.html(D.content);$.getScript(D.scripts[0],function(){o=new idp.login.modal();y(B,C)})},"jsonp")}else{y(B,C)}}function y(B,C){if(!o){return}o.launchModal({elementName:B,idpContentUrl:s.watchAuthUrl+"/login.aspx?version=7&spkey="+s.ssoSpkey,launchCreateAccount:C,ciCodes:{li_submit:"82916",li_signup:"82915",li_help:"82914",li_launch:"82909",li_close:"82912",ca_submit:"82913"},successCallback:function(D){if(D){var E=$("#pc-login-wrapper");var F=$("#pc-logout-wrapper");if(E&&F){E.toggle(!D.IsValid);F.toggle(D.IsValid)}l=m();if(l===false){a()}else{w()}}},reloadData:false})}function a(){var B=b(s.watchDataUrl,"act=3&name="+encodeURIComponent(s.gtld));$.getJSON(B,function(C){l=C===true;w()})}function r(){var B=b(s.watchDataUrl,"act=4&name="+encodeURIComponent(s.gtld));$.getJSON(B,function(C){l=C!==true;w()})}function b(D,B){var C="?";if(D.indexOf("?")>=0){C="&"}return D+C+B}function k(){var B=false;$.ajaxSetup({async:false});var C=s.relativePcDataSetUrl;$.getJSON(C,function(D){if(D){B=D.pcIsTrusted}});$.ajaxSetup({async:true});return B}function h(C){if(typeof s.gTldPreRegPhaseDataJson==="undefined"){return null}var B=$.grep(s.gTldPreRegPhaseDataJson,function(E,D){return E.Code.substring(0,2).toLowerCase()===C.substring(0,2).toLowerCase()});return(B.length==0)?null:B[0]}function g(C){if(typeof s.gTldPreRegPhaseDataJson==="undefined"){return null}var B=$.grep(s.gTldPreRegPhaseDataJson,function(E,D){return E.Code.toLowerCase()===C.toLowerCase()});return(B.length==0)?null:B[0]}function f(B){if(typeof B==="undefined"||B===null){return"nill"}if(typeof B.Prices==="undefined"||B.Prices===null){return"null"}if(typeof B.Prices.TotalCurrent!=="undefined"){return B.Prices.TotalCurrent}if(typeof B.Prices.TotalList!=="undefined"){return B.Prices.TotalList}return"missing"}function z(){if(s.tldLogoImageExists===true){$("#gtld-logo > img").attr("src",s.tldLogoImageFileName)}else{$("#gtld-logo").hide()}}function j(){if(s.hasProductLimitations===false){$("#limitations-wrap").remove()}}function d(B){window.console&&window.console.log&&window.console.log(B)}function c(B){window.console&&window.console.dir&&window.console.dir(B)}function p(){var B=(s.tldH1TagExists!==true);if(B){window.location=s.redirectUrl}return B}this.Initialize=function(B){s=$.extend({},e,B);z();v();t();j()};this.SetupGeneralAvailability=function(){if(p()){return}u();var B=h("ga");var C=f(B);$("#ga-head-price").html(C);$("#tld-pricetagline,#tld-priceline").show()};this.SetupPreReg=function(){if(p()){return}u();var B=h("ga");$("#div-ga-pre-registration").show();$("#ga-dates-before").hide();$("#ga-dates-during").hide();var C=f(B);$("#ga-price").html(C);$("#pre-reg-price").html(C);$("#tld-pricetagline,#tld-priceline").show();var G=h("lr");if(G===null||G.Status===q.CLOSED){var D=h("er")!=null;if(D){var F="";var E=false;for(var H=1;H<=5;H++){var I=g("er"+H);if(I&&I.Status!=q.CLOSED){var J=f(I);var L=I.LiveStartDate+" "+I.LiveStartTime;F+=s.earlyAccessPricingTemplate.replace("{0}",H).replace("{1}",J);F+=s.earlyAccessDateTemplate.replace("{0}",L);E=true}}if(F.length>0){s.$lrEarlyAccessDiv.html(F).show();s.$lrNotEarlyAccessDiv.hide()}if(E){$("#div-lr-priority").show()}}else{$("#div-lr-priority").hide()}}else{$("#lr-dates-before").hide();$("#prereg-lr-before").text(G.StartDate+" "+G.StartTime);$("#prereg-lr-during").text(G.EndDate+" "+G.EndTime);$("#lr-price").html(f(G));$("#div-lr-priority").show()}var K=h("sr");if(K===null||K.Status===q.CLOSED){$("#div-sr-trademark").hide()}else{$("#sr-dates-before").hide();$("#sr-dates-during").hide();$("#prereg-sr-before").text(K.StartDate+" "+K.StartTime);$("#prereg-sr-during").text(K.EndDate+" "+K.EndTime);$("#sr-price").html(f(K));$("#div-sr-trademark").show()}};this.SetupWatch=function(){if(p()){return}$.ajaxSetup({cache:false});if(k()===true){l=m()}$("#watch-button").show().click(A);w()}}}domains.controls.gtldTemplatesClient=new domains.controls.cds_gtld_templates();