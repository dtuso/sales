extends ../../layouts/homepage/default_base
block styles
  link(href!="[@T[link:<cssroot />]@T]fos/hp/rebrand/css/homepage20141208.css" rel="stylesheet" type="text/css")
  style.
    .gdhp-search-box .domainSearchBox{width:780px;}

block marquee
  |      [@P[cdsDocument:<data app="sales" location="homepage/marquee/gybo/default_template" /> ]@P]

block tiles
  atlantis:webstash(type="css")
    style.
      .gdhp-tile-wrap{height:580px;width:100%;background-color:#d4d4d4}
      .gdhp-tile-area{width:1000px;margin:0 auto}
      .gdhp-tile{width:480px;height:480px;background-color:#fff;float:left;margin:40px 10px 0;cursor:pointer;}
      .gdhp-tile span{display:block;}
      .gdhp-tile .btn-lrg{font-size:24px;padding:14px 12px;box-sizing:border-box;height:60px;width:240px;}
      .gdhp-tile .btn-orange{color:#fff;background-color:#f5811f;border-bottom:4px solid #b25e18;}
      .gdhp-tile .btn-orange:hover{background-color:#ff9b39;border-color:#cc7832}
      .tile-sprite{background:url([@T[link:<imageroot />]@T]fos/hp/rebrand/img/gdhp_tile_sprite_20141205.png) scroll no-repeat;}
  .gdhp-tile-wrap
    .gdhp-tile-area
      block primaryTile
        | [@P[cdsDocument:<data app="sales" location="homepage/tile/hosting-old-brand/default_template" /> ]@P]
      block secondaryTile
        |   [@P[cdsDocument:<data app="sales" location="homepage/tile/30-percent-gtld/default_template" /> ]@P]
  #myVideoModal.modal.fade.videoModal.js-gdhpclick(data-url="video-close")
    .modal-dialog
      .modal-content
        .modal-header
          button.modal-header-close.close(type="button",data-dismiss="modal",aria-hidden="true") &times;
        .modal-body
          iframe(width="854",height="480",src="",autoplay,scrolling="no",frameborder="0",allowfullscreen)

block bugBar
  +tldBugs(["com","co","org","club"])

block lowerMarquee
  | 
  | [@P[cdsDocument:<data app="sales" location="homepage/locals/es-us/lowermarquee" /> ]@P]

block cookieWarning

block scripts
  script(src!="[@T[link:<javascriptroot />]@T]fos/hp/rebrand/js/bigtext.min.js")
  script(src!="[@T[link:<javascriptroot />]@T]fos/script/sales17.min.js" type="text/javascript")
  script(src!="[@T[link:<javascriptroot />]@T]fos/hp/rebrand/js/homepage_script_20140410.min.js" type="text/javascript")
  script(src!="[@T[link:<javascriptroot />]@T]fos/script/atlantis_jquery14.min.js" type="text/javascript")
  script(src!="[@T[link:<javascriptroot />]@T]shared/js/jquery.plugins.min.20111019.js" type="text/javascript")
  script(src!="[@T[link:<javascriptroot />]@T]fos/lib/gd-swipe/js/swipe-v2.2.min.js" type="text/javascript")
  script(src!="[@T[link:<javascriptroot />]@T]fos/lib/gd-swipe/js/gd-swipe-v2.min.js" type="text/javascript")
  script(src!="[@T[link:<javascriptroot />]@T]starfield/fos.share/v1.3/fos.share-20140505.min.js" id="fosShareScript")
  script(src!="[@T[link:<javascriptroot />]@T]fastball/js_lib/FastballLibrary0006.min.js?version=2" type="text/javascript")
  script(src!="[@T[link:<javascriptroot />]@T]fos/201401/global/vendor/bootstrap/js/bootstrap.min.js" type="text/javascript")
  script(type="text/javascript").
    $(document).ready(function() {
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&'),
    qs = [],
    date = new Date();
    for(var i = 0; i < hashes.length; i++) {
    var hash = hashes[i].split('=');
    qs.push(hash[0]);
    qs[hash[0]] = hash[1];
    }
    $('#shareme').fosShare({});
    if($("#searchDomainName").val().length) {
    $("#searchDomainName").val("");
    }
    $(".gdhp-search-box2").gdhpDomainSearch({
    'domainInputId': '#searchDomainName2',
    'tldInputId': '#searchTldName2',
    'tldToggleId': '#searchTldToggle',
    'tldListId': '#searchTldList',
    'searchButton': '#domainSearchAction2',
    'searchUrl': '[@T[link:<relative path='/domains/search.aspx'><param name='ci' value='54814' /></relative>]@T]',
    'idnUrl': '[@T[link:<relative path='/domains/search.aspx'><param name='ci' value='82474' /></relative>]@T]',
    'domainInputLabelText': '[@L[cds.sales/homepage/segments/default:domain-banner-search-text]@L]',
    'focusOnLoad' : false
    });
    $(".gdhp-search-box").gdhpDomainSearch({
    'domainInputId': '#searchDomainName',
    'tldInputId': '#searchTldName',
    'tldToggleId': '#searchTldToggle',
    'tldListId': '#searchTldList',
    'searchButton': '#domainSearchAction',
    'searchUrl': '[@T[link:<relative path='/domains/search.aspx'><param name='ci' value='54814' /></relative>]@T]',
    'idnUrl': '[@T[link:<relative path='/domains/search.aspx'><param name='ci' value='82474' /></relative>]@T]',
    'domainInputLabelText': '[@L[cds.sales/homepage/segments/default:domain-banner-search-text]@L]'
    });
      $('.search-form').on('submit', function (e){
            e.preventDefault();

            $('button[name="searchButton"]', this).addClass('disabled');

            var params = {
                query:$(this).serialize(),
                searchUrl:$(this).attr('data-url')
            };
            DomainSearch(params,function(err,NextStepUrl){
                if(typeof NextStepUrl === 'undefined')
                {
                  NextStepUrl = '[@T[link:<relative path="/domains/search-new.aspx"></relative>]@T]';
                }
                if(err == null )
                {
                    window.location = NextStepUrl;
                }
                else{
                    if(console != "undefined")
                    console.log(err);
                }
            });
        });

        function DomainSearch(params, cb) {
              $.ajax({
                url: params.searchUrl,
                type: 'POST',
                data: params.query,
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                  var data = { Error: errorThrown, Success: false };
                  cb(errorThrown,null);
                },
                success: function (data) {
                  cb(null,data.NextStepUrl);
                }
              });
        }
      $("#disclaimers > p > a").click(function () {
            $("#g-modal").modal({
              overlayId: "g-modal-overlay",
              close: "false", // disables default close button
              autoPosition: "true"
            });
          });
          $(".g-modal-close").click(function () {
            // Closes the last modal
            $.modal.close();
          });
    });
    $('.uk-cookie-close').click(function() {
          $('.uk-cookie-banner').css("display","none");
          var CookieDate = new Date;
          CookieDate.setFullYear(CookieDate.getFullYear( ) +10);
          document.cookie = 'uk_banner=closed; expires=' + CookieDate.toGMTString( ) + '; path=/';
          })
    if (document.cookie.indexOf("uk_banner") >= 0) {
           $('.uk-cookie-banner').css("display","none"); 
           } else {
           $('.uk-cookie-banner').css("display","block");
           }     
    if(navigator.userAgent.match(/iPad|iPhone|iPod/i)) {
    $('head').append('<meta name="viewport" content="width=1150px">');
    }
    $('body').on('click','.js-gdhpclick',function(event){
      var $clickedElement = $(event.currentTarget);
      var $clickedUrl = $clickedElement.attr('data-url'); 
      event.stopPropagation();
      switch($clickedUrl)
      {
        case "video":
           $('div#myVideoModal').modal('show');
        break;
        case "none":
        break;
        case "video-close":
          $('div#myVideoModal').modal('hide');
        break;
        default:
          window.location.href=$clickedUrl;
      }
    });
    $(window).load(function () {
      $('.bigtext').bigtext().css('visibility', 'visible');
      setTimeout( "$('.bigtext').bigtext().css('visibility', 'visible');",500 );
    });
