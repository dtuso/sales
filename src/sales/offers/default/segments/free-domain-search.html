---
location: sales/offers/segments/free-domain-search
id: 
name: FOS-23412
---
<atlantis:webstash type="css">
  <style>
    #domainRow{background-color:#fff;padding:60px 0 30px;min-height:360px}
    #domainRow h1{color:#333;font-size:60px;font-weight:100;line-height:1.3em}
    #domainRow h1 strong{font-size:70px;font-weight:700!important;display:block}
    #domainRow h1 strong em{color:#ff8a00;font-style:normal}
    #domainRow form{width:auto;margin:30px auto auto;padding:8px;display:table}
    #domainRow form .highlight-tooltip{display:none}
    #domainRow form.highlight{background-color:#fc0}
    #domainRow form.highlight .highlight-tooltip{display:block;background-color:#fc0;color:#630;position:absolute;right:106%;top:-8px;text-transform:uppercase;text-align:center;padding:13px 23px}
    #domainRow form.highlight .highlight-tooltip:after{content:"";border-width:10px 0 10px 17px;border-style:solid;border-color:transparent transparent transparent #fc0;position:absolute;right:-17px;top:34%}
    #domainRow #add-domain-btn,
    #domainRow .flt-btn-grn,
    #domainRow .flt-btn-orng{font-size:24px;padding:18px 36px;font-weight:400}
    #domainRow .search-result .search-result-invalid,
    #domainRow .search-result .search-result-is-available,
    #domainRow .search-result .search-result-not-available{display:none}
    #domainRow .search-result .result-message{margin:20px auto;display:table}
    #domainRow .search-result.available .search-result-is-available{display:block;color:#70a100}
    #domainRow .search-result.invalid .search-result-invalid,
    #domainRow .search-result.not-available .search-result-not-available{display:block;color:#000}
    #domainRow #add-domain-btn{font-size:24px;padding:18px 36px}
    #domainRow .searched-domain{font-weight:600}
    .domain-check-buttons {clear:both; text-align:right;}    
    #add-domain-btn {margin-top:10px!important;margin-bottom:4px!important;}
    #no-domain-loading, 
    #add-domain-loading {margin-top:14px!important; margin-left:auto;margin-right:auto;}

    .search-input-wrapper{width:453px}
    .search-input-label{min-width:500px}
    .domain-search{background-color:#fff;border:1px solid #a4a4a4;height:53px;position:relative;margin-right:6px;min-width:375px;display:table;float:left}
    .domain-search>div{display:inline-block;vertical-align:top}
    .domain-search>.tld-input{border:0;float:none;font-size:24px;height:51px;outline:0;position:relative;min-width:120px;z-index:2;border-left:1px solid #a4a4a4}
    #domain_search_input.search-input,.search-input[type=text]{background-color:transparent;border:0;color:#333;font-family:"Helvetica Neue",Helvetica,Arial,"Lucida Grande",sans-serif;font-size:24px;font-weight:300;line-height:1.4;height:30px;left:13px;outline:0;padding:0;position:absolute;right:9px;top:10px;width:70%}
    .search-input.allow-placeholder{background-color:transparent}
    .search-input-label{color:#333;display:block;font-size:24px;font-weight:300;outline:0;overflow:hidden;padding:13px 0 8px 13px;white-space:nowrap}
    .tld-input-selected{float:left;padding:13px 0 4px 14px;width:120px}
    .tld-input.droplist-open{overflow:visible}
    .tld-input>ul{padding:0;list-style:none;cursor:pointer;margin:-1px;border:1px solid #bcbcbc;background-color:#fff;font-size:14px;position:absolute;overflow:hidden;top:-9999em;width:112px;z-index:3}
    .tld-input.droplist-open>ul{width:155px;top:52px;z-index:1000}
    .tld-input.droplist-open>ul>li{padding:5px 10px}
    .tld-input.droplist-open>ul>li:hover{background:#f5f5f5}
    .tld-input.droplist-open>ul>li.selected,.tld-input.droplist-open>ul>li.selected:hover{background:#e4efc7}
    .domain-arrow{cursor:pointer;float:left;font-size:1px;height:30px;margin:2px 2px 2px 0;min-width:31px;padding:0;position:relative}
    .domain-search .g-btn-sec{border-radius:0}
    .domain-arrow span{border-color:#6B6B6B transparent transparent;border-style:solid;border-width:5px 5px 0;display:block;height:0;width:0;position:absolute;top:22px;left:7px}

  </style>
</atlantis:webstash>

<div id="freeDomain">
  <div class="columns">
  

  <div class="column-right">
    <form name="domaincheck" method="get" action="[@T[link:<relative path='domains/actions/json/domainavailabilitycheck.aspx'></relative>]@T]" id="domainSearch" class="highlight search-form">
      <input type="hidden" name="targetdivid" value="x" />
      <input type="hidden" name="source" value="domaincheck" />
      <input type="hidden" name="token" id="token"/>
      <input type="hidden" name="domaintoadd" id="domaintoadd"/>
      <input type="hidden" name="formSubmitButton" value="Add-to-Cart"/>
      <div class="domain-search">
    <div class="highlight-tooltip condensed">[@L[cds.sales/offers/default:start-here]@L]</div>
                
    <div class="text-left search-input-wrapper">
        <label for="txtsld" class="search-input-label">[@L[cds.sales/offers/default:domain-search-placeholder]@L]</label>
        <input id="txtsld" type="text" class="search-input" name="sld" value="" onfocus="this.style.backgroundColor='#fff'" onblur="if(this.value==''){this.style.backgroundColor='transparent'}" >
    </div>        
        <div class="text-left tld-input">
          <div class="tld-input-selected">
            <span>.com</span>
          </div>
          <input type="hidden" name="tld" id="txtTld" value="com" />
          <input type="hidden" name="addIfAvailable" value="true" />
          <a href="javascript:void(0)" class="domain-arrow g-btn-sm g-btn-sec"><span></span></a>
          <ul>
            <li data-main=".com" data-view="com" class="availabletld selected">
              <div data-main="true">
              <span>.com</span>
              </div>
            </li>
             ##if(countrySiteAny(br) || isManager())
             <li data-main=".com.br" data-view="com.br" class="availabletld">
              <div data-main="true">
              <span>.com.br</span>
              </div>
            </li>
             ##endif
              ##if(countrySiteAny(mx) || isManager())
            <li data-main=".com.mx" data-view="com.mx" class="availabletld">
              <div data-main="true">
              <span>.com.mx</span>
              </div>
            </li>
            ##endif
             ##if(countrySiteAny(au) || isManager())
            <li data-main=".com.au" data-view="com.au" class="availabletld">
              <div data-main="true">
              <span>.com.au</span>
              </div>
            </li>
            ##endif
            <li data-main=".co" data-view="co" class="availabletld">
              <div data-main="true">
              <span>.co</span>
              </div>
            </li>
             ##if(countrySiteAny(ca) || isManager())
            <li data-main=".ca" data-view="ca" class="availabletld">
              <div data-main="true">
              <span>.ca</span>
              </div>
            </li>
            ##endif
             ##if(countrySiteAny(in))
            <li data-main=".in" data-view="in" class="availabletld">
              <div data-main="true">
              <span>.in</span>
              </div>
            </li>
            ##endif
            <li data-main=".net" data-view="net" class="availabletld">
              <div data-main="true">
              <span>.net</span>
              </div>
            </li>
            <li data-main=".org" data-view="org" class="availabletld">
              <div data-main="true">
              <span>.org</span>
              </div>
            </li>
            ##if(countrySiteAny(uk) || isManager())
            <li data-main=".co.uk" data-view="co.uk" class="availabletld">
              <div data-main="true">
              <span>.co.uk</span>
              </div>
            </li>
            <li data-main=".uk" data-view="uk" class="availabletld">
              <div data-main="true">
              <span>.uk</span>
              </div>
            </li>
            ##endif
          </ul>
        </div>
      </div>
      <div id="domain-search-click" class="flt-btn-grn" data-ci="domainSearchClick">[@L[cds.sales/offers/default:search]@L]</div>
      <div id="search-btn-loading" class="loading" style="display: none"></div>
    </form>

    <div id="domain-avail-check" class="domain-check" style="display:none;">
      <div id="domain-searched" class="domain-check-hidden"></div>
    </div>
    <div class="domain-check-buttons">
      <div id="no-domain-loading" class="loading" style="display: none"></div>
      

      <div class="search-result text-center">
        <div class="search-result-not-available">
          <div class="result-message"><span class="offers-sprite icon-delete icons"></span>[@L[cds.sales/offers/default:domain-not-available]@L]</div>
        </div>
        <div class="search-result-is-available">
          <div class="result-message"><span class="offers-sprite icon-check icons"></span>[@L[cds.sales/offers/default:domain-is-available]@L]</div>
          <div id="add-domain-btn" class="flt-btn-orng" data-ci="addDomainBtn">[@L[cds.sales/offers/default:checkout]@L]</div>
        </div>
        <div class="search-result-invalid">
          <div class="result-message">[@L[cds.sales/offers/default:domain-is-invalid]@L]</div>
        </div>
      </div>


      <div id="add-domain-loading" class="loading" style="display: none"></div>
    </div>
  </div>
</div>
</div>



<atlantis:webstash type="js">
  <script>
    $.ajaxSetup({cache:false});
    var nextStepUrl;
    
    var PlanBox6UI = {
      changeSelected: function (li, parent) {
        var content = li.find('div[data-main=true]').html();
        parent.find('div:first').html(content);
        if (li.hasClass('availabletld')) {
          $('#txtTld').val(li.attr('data-view'));
        }
      },
      recordClick: function (c, a, b) {
        if (typeof (FastballEvent_MouseClick) !== "undefined") {
          FastballEvent_MouseClick(c, a, b, "a");
        }
      }
    };

    var PlanConfig = {
      changeSelected: function (li, parent) {
        var content = li.find('div[data-main=true]').html();
        parent.find('div:first').html(content);
        if (li.hasClass('availabletld')) {
          $('#txtTld').val(li.attr('data-view'));
        }
      }, apiPlantoCart: function (data,cb) {
        if(typeof data != "object") return;

        data = data || {};
        
        data.action = data.action || 'add';
        data.itcCode = data.itcCode || false;
        data.ciCode = data.ciCode || false;
        data.quantity = data.quantity || '1';
        data.planSelected = data.planSelected || false;

        for(key in data){
          if(data[key]===false) return;
        }
        
        var url = PlanConfig.getCartAPIUrl(data.action, data.itcCode, data.ciCode, data.quantity, data.planSelected);
        $.getJSON(url, function (data) {
          if (data.Success == true) {                                 
            if(typeof cb == 'function'){
              cb();
            } else {   
            ##if(isManager())
              window.location = '[@T[link:<external linktype="MANAGERCARTURL" path="/basket.aspx" secure="true" />]@T]';
            ##else
              window.location = '[@T[link:<external linktype="carturl" path="/basket.aspx" secure="true"/>]@T]';
            ##endif
            }    
          }
        });
         
      }, getCartAPIUrl:function(action,itcCode,ciCode,quantity,planSelected) {
            var url = '[@T[link:<relative path="/api/package" parammode="explicit"/>]@T]';
            url += '/'+ action; //action
            url += '/'+ itcCode; //itc code
            url += '/'+ ciCode; //ci code
            url += '/'+ quantity;
            url += '/' + planSelected; //Plan Name
           
            return url;
        }
    };

    $(document).ready(function () {

        var $buttonsDiv = $('.domain-check-buttons');
        $buttonsDiv.appendTo('#freeDomain'); 
        // clear form
        $("#txtsld").val('');
        $('#planSelected').val(offersCodes.plan)
        

        $('.tld-input').click(function () {
          var wrap = $(this);
          if (wrap.hasClass('droplist-open')) {
            wrap.removeClass('droplist-open');
          } else {
            wrap.addClass('droplist-open');
          }
        });


        $('.tld-input').mouseleave(function () {
            $(this).removeClass('droplist-open');
        });


        $('.tld-input > ul > li').click(function () {
          var li = $(this);
          var parent = li.parents('.tld-input');
          li.siblings('li').removeClass('selected');
          li.addClass('selected');
          //PlanBox6UI.showTerm(li);
          PlanBox6UI.changeSelected(li, parent);
        });

       
        $('#add-domain-btn').bind('click', function (e) {
          $('#domain-search-click').addClass('disabled');
          $('#add-domain-btn').addClass('disabled');
          $('#add-domain-loading').fadeIn();
          
          var data = {
            ciCode: offersCodes.ci.apiAddCi,
            itcCode: offersCodes.itc, 
            planSelected: offersCodes.plan
          }
      
          PlanBox6UI.recordClick(e, offersCodes.ci.apiAddCi, $(this)[0]);
          PlanBox6UI.recordClick(e, offersCodes.ci.apiDomainAddToCart, $(this)[0]);
          
          PlanConfig.apiPlantoCart(data,function(){
            nextStepUrl = updateUrlParams(nextStepUrl,{'ci':offersCodes.ci.apiDomainAddToCart});
            window.location = nextStepUrl;      
          });
        });

        $('#domain-search-click').bind('click', function () {
          $('#domainSearch').submit();
        }); 

        $('form[name=domaincheck]').each(function(){
          //update the form to have correct trackingCode
          var $this = $(this);
          var newAction = updateUrlParams($this.attr("action"),{'trackingCode':offersCodes.itc})
          $this.attr("action",newAction);
        });

        $('form[name=domaincheck]').submit(function (e) {
          // Domain Search
          PlanBox6UI.recordClick(e, offersCodes.ci.domainSearchSubmit, $(this)[0]);
          var domaintoremove = $('#domaintoadd').val();
          var domaintoadd = $('#domaintoadd').val();

          var tld = $('#txtTld');
          var $searchField = $('#txtsld');
          var domain = $searchField.val();
          var domainSplit = domain.split('.');
          var newtld = '';
          var $resultsDiv = $('.search-result');
          var data = [];

          $resultsDiv.removeClass("available not-available invalid");

          var $avlTlds = $(".availabletld");
          var tld2 = $(".availabletld.selected").data("view");
        
          $avlTlds.each(function(){
            data.push($(this).data("view"))
          });

          var splitSearch = matchEnding($.trim(domain),data);
            
          $searchField.val(splitSearch[0].split('.')[0].toLowerCase());

          $avlTlds.each(function(){
            var $this = $(this);
            if($this.data('view')==splitSearch[1]){
              $(".availabletld.selected").removeClass('selected');
              $this.addClass('selected');
              $('.tld-input-selected span').html("."+splitSearch[1]);
              tld2 = splitSearch[1];
            } else {
              
            }
          });

          domain = [$searchField.val() , tld2].join(".");

          tld.val(tld2);

            var valid = false;

            if ($searchField.val().length > 0) {

               /* if (tld.val() == '') {
                    tld.val('com');
                } else if (newtld != undefined) {
                    tld.val(newtld);
                    $('#txtsld').val(domain.split('.')[0]);
                }

                */
                $('.availabletld').each(function () {
                    if ($(this).attr('data-view') == tld.val()) {
                        valid = true;
                    }
                });
                $(".searched-domain").html(domain)
        
                if (!valid) {
                  {#
                    /*var url = '[@T[link:<relative path="domains/search.aspx"><param name="ci" value="" /></relative>]@T]';
                    url += (url.indexOf('?') >= 0) ? "&" : "?";
                    url += 'domaintocheck=' + domain;
                    url += '&tld=' + tld.val();

                    $('#domain-avail-check').addClass('unavailable');
                    $('#domain-avail-check').removeClass('available');
                    $('#domain-searched').removeClass('domain-check-hidden');
                    $('#add-domain-btn').addClass('hide-flt-btn');
                    $('#domain-searched').html("<span>" + domain.toLowerCase() + "&nbsp;[@L[fosconfigcommon:doesnotqualify]@L]</span><br />[@L[fosconfigcommon:stillinterested]@L]&nbsp;<a class=\"g-a\" href=\"" + url + "\">[@L[fosconfigcommon:searchnowlink]@L]</ a>");
                    tld.val('com');*/
                    #}
                } else {
                    $('.search-form').removeClass('highlight');
                    $('#domain-search-click').addClass('disabled');
                    $('#add-domain-loading').fadeIn();
                    
                    $.get($(this).attr('action')+'&domaintoremove='+domaintoremove, $(this).serialize(), function (jsonData) {
                        $('#add-domain-btn').removeClass('hide-flt-btn');

                        if (jsonData.Properties.anyAreAvailable === false && jsonData.Properties.domainInfo[0].error === "Domain name is already taken") {
                            $('#domain-avail-check').addClass('unavailable');
                            $('#domain-avail-check').removeClass('available');
                            $('#domain-searched').removeClass('domain-check-hidden');
                            $('#add-domain-btn').addClass('hide-flt-btn');
                            //$('#domain-searched').html("<span>" + jsonData.Properties.domainInfo[0].shortName.toLowerCase() + "&nbsp;[@L[fosconfigcommon:notavailable]@L]</span><br />[@L[fosconfigcommon:tryagain]@L]");

                            $resultsDiv.addClass("not-available");

                        } else if (jsonData.Properties.domainInfo[0].isPremium) {
                            $('#domain-avail-check').addClass('unavailable');
                            $('#domain-avail-check').removeClass('available');
                            $('#domain-searched').removeClass('domain-check-hidden');
                            $('#add-domain-btn').addClass('hide-flt-btn');
                            //$('#domain-searched').html("<span>" + domain + "&nbsp;[@L[fosconfigcommon:doesnotqualify]@L]</span><br />[@L[fosconfigcommon:stillinterested]@L]&nbsp;<a class=\"g-a\" href=\"" + url + "\">[@L[fosconfigcommon:searchnowlink]@L]</ a>");

                            $resultsDiv.addClass("not-available");

                        } else if (jsonData.Properties.domainInfo[0].error === "Domain name is invalid") {
                            $('#domain-avail-check').addClass('unavailable');
                            $('#domain-avail-check').removeClass('available');
                            $('#domain-searched').removeClass('domain-check-hidden');
                            $('#add-domain-btn').addClass('hide-flt-btn');
                            //$('#domain-searched').html("<span>" + jsonData.Properties.domainInfo[0].shortName.toLowerCase() + "&nbsp;[@L[cds.sales/hosting/fosconfigcommon:domNameInvalid]@L]</span><br />[@L[fosconfigcommon:tryagain]@L]");

                            $resultsDiv.addClass("invalid");

                        } 
                        else if (jsonData.Properties.domainInfo[0].error != '') {
                            $('#domain-searched').removeClass('domain-check-hidden');
                            $('#domain-avail-check').addClass('unavailable');
                            $('#domain-avail-check').removeClass('available');
                            $('#add-domain-btn').addClass('hide-flt-btn');
                            //$('#domain-searched').html("<span>" + jsonData.Properties.domainInfo[0].shortName.toLowerCase() + "&nbsp;[@L[fosconfigcommon:notavailable]@L]</span><br />[@L[fosconfigcommon:tryagain]@L]");

                            $resultsDiv.addClass("not-available");

                        } else {
                            $('#domain-avail-check').removeClass('unavailable');
                            $('#domain-avail-check').addClass('available');
                            $('#domain-searched').removeClass('domain-check-hidden');
                            //$('#domain-searched').html("<span>" + jsonData.Properties.domainInfo[0].shortName.toLowerCase() + "</span><br />[@L[fosconfigcommon:isavailable]@L]");
                            $('#token').val(jsonData.Properties.domainInfo[0].name + '|available');
                            $('#domaintoadd').val(jsonData.Properties.domainInfo[0].name);

                            $resultsDiv.addClass("available");
                        }

                        $(".searched-domain").html(jsonData.Properties.domainInfo[0].shortName.toLowerCase());

                        $('#domain-search-click').removeClass('disabled');
                        $('#add-domain-loading').hide();
                        console.log(jsonData)
                        nextStepUrl = jsonData.Properties.nextStepUrl;
                    }, 'json');
                     
                    return false;
                }
            }
            return false;
        });
    });

  </script>
</atlantis:webstash>