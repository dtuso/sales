if(!Array.prototype.filter){Array.prototype.filter=function(a){if(!this){throw new TypeError()}var d=Object(this);var c=d.length>>>0;if(typeof a!=="function"){throw new TypeError()}var e=[];var f=arguments[1];for(var b in d){if(d.hasOwnProperty(b)){if(a.call(f,d[b],b,d)){e.push(d[b])}}}return e}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var a=(d||0),b=this.length;a<b;a++){if(this[a]===c){return a}}return -1}}String.format=function(){var c=arguments[0];for(var a=0;a<arguments.length-1;a++){var b=new RegExp("\\{"+a+"\\}","gm");c=c.replace(b,arguments[a+1])}return c};ko.bindingHandlers.executeOnEnter={init:function(c,d,b,e){var a=b();$(c).keypress(function(f){var g=(f.which?f.which:f.keyCode);if(g===13){f.target.blur();a.executeOnEnter.call(e,e,f);return false}return true})}};ko.bindingHandlers.withProperties={init:function(d,f,a,g,b){var e=f(),c=b.createChildContext(g);ko.utils.extend(c,e);ko.applyBindingsToDescendants(c,d);return{controlsDescendantBindings:true}}};ko.bindingHandlers.attrIf={update:function(b,f,a){var c=ko.utils.unwrapObservable(f());var e=ko.utils.unwrapObservable(c._if);if(e){ko.bindingHandlers.attr.update(b,f,a)}else{for(var d in c){if(c.hasOwnProperty(d)&&d.indexOf("_")!==0){$(b).removeAttr(d)}}}}};ko.bindingHandlers.uniqueId={init:function(a,c){var b=c();b.id=b.id||ko.bindingHandlers.uniqueId.prefix+(++ko.bindingHandlers.uniqueId.counter);a.id=b.id},counter:0,prefix:"unique"};ko.bindingHandlers.uniqueFor={init:function(a,c){var b=c();b.id=b.id||ko.bindingHandlers.uniqueId.prefix+(++ko.bindingHandlers.uniqueId.counter);a.setAttribute("for",b.id)}};ko.bindingHandlers.cdsSlider={init:function(a,c){var b=c()||{};$(a).filterSlider(b)}};ko.observable.fn.eq=function(b){var a=this;return a()===b};ko.computed.fn.eq=function(b){var a=this;return a()===b};ko.observable.fn.gt=function(b){var a=this;return a()>b};ko.computed.fn.gt=function(b){var a=this;return a()>b};ko.observable.fn.gtEq=function(b){var a=this;return a()>=b};ko.computed.fn.gtEq=function(b){var a=this;return a()>=b};ko.observable.fn.lt=function(b){var a=this;return a()<b};ko.computed.fn.ltEq=function(b){var a=this;return a()<=b};ko.observable.fn.ltEq=function(b){var a=this;return a()<=b};ko.computed.fn.lt=function(b){var a=this;return a()<b};ko.observable.fn.endsWith=function(c){var a=this;var b=a();return -1!==b.indexOf(c,b.length-c.length)};ko.computed.fn.endsWith=function(c){var a=this;var b=a();return -1!==b.indexOf(c,b.length-c.length)};ko.observable.fn.startsWith=function(c){var a=this;var b=a()||"";if(c.length>b.length){return false}return c===b.substring(0,c.length)};ko.computed.fn.startsWith=function(c){var a=this;var b=a()||"";if(c.length>b.length){return false}return c===b.substring(0,c.length)};ko.observable.fn.lcEq=function(b){var a=this;return ko.computed(function(){return a()===b})};var sr_js={addToPending:function(e,b,a){if(e&&0<e.length&&b&&DomainSearchResults.ViewModel){var c=ko.utils.arrayFirst(DomainSearchResults.ViewModel.Items(),function(d){return b===d.Id()})||DomainSearchResults.ViewModel.ExactMatch();if(c){var f=c.Area();c.Area(DomainSearchResults.ViewModel.Areas().Dbs);if(e&&-1<e.indexOf("dbs")){c.Status("dbs")}$.ajaxSetup({async:false});c.AddToCart(c);c.Area(f);$.ajaxSetup({async:true})}}}};(function(h,a,v){var d=function(z,x,A,w){var y=this;y.FlagText=x;y.Text=z;y.Value=A;y.CiCode=w;y.CurrentVisible=ko.observable(5);y.IsSelected=ko.observable(false);y.IsVisible=ko.observable(true)};var c={All:new d("All",null,"dppsr_extnd_all",84300).IsSelected(true),Available:new d("Available","Available","dppsr_extnd_avail",0).IsVisible(false),Recommended:new d("Recommended","Recommended","dppsr_extnd_strpmall",84307),Variations:new d("Variations",null,"dppsr_extnd_spins",84308),Area:new d("Country/Region","Country/Location","dppsr_extnd_cctld",84301),Premium:new d("Premium","Premium","dppsr_extnd_prem",84305),Recent:new d("Recent",null,"dppsr_extnd_recent",0).IsVisible(false),PreReg:new d("Pre-Registration","Pre-Registration",0).IsVisible(false),Unavailable:new d("Unavailable",null,"dppsr_extnd_unavail",0).IsVisible(false),Dbs:new d("Domain Buy Service",null,"dppsr_extnd_dbsmodal",0).IsVisible(false),PremiumTeir:new d("PremiumTier","Premium",0)};var f={Auction:4,Available:1,Backorder:2,Selected:3,Unavailable:0};var g={Add:1,AddStack:4,GetNextStep:3,Update:6,UpdateStack:7,Remove:2,RemoveStack:5};var k={And:0,Or:1};h.InputTypes={None:"",Checkbox:"checkbox",Textbox:"text",Radio:"radio",Slider:"slider"};var u={AfterMarket:"aftermarket",Available:"available",Backorder:"backorder",BackorderService:"dbs",Premium:"premium",PreRegistration:"preregistration",PrivateSale:"privatesale",Unavailable:"unavailable",Unknown:"unknown",PremiumTeir:"premiumteir"};var m=function(A,E,y,x,C,D,z){var B=this;var w=ko.observableArray(a.isArray(C||[u.Unknown])?ko.utils.arrayGetDistinctValues(C)||[u.Unknown]:[C]);B.AreaTypeMap=ko.observable(x);B.DisplayText=y;B.InitialAvailability=z||f.Available;B.IsVisible=ko.observable(true);B.Priority=A;B.StatusTypeMap=ko.computed({read:function(){return w()},write:function(F){w(a.isArray(F||[u.Unknown])?ko.utils.arrayGetDistinctValues(F)||[u.Unknown]:[F])},deferEvalutation:true,owner:B},B);B.TemplateName=D||"available";B.Value=(E||(y||"")).toLowerCase();B.IsMatch=function(G){var H=false;if(G){H=!B.AreaTypeMap()||B.AreaTypeMap()&&(c.All===B.AreaTypeMap()||(G.Area()&&B.AreaTypeMap()===G.Area()));if(B.StatusTypeMap()&&0<B.StatusTypeMap().length&&G.Status()){for(var F in B.StatusTypeMap()){H=B.StatusTypeMap()[F]&&B.StatusTypeMap()[F]===G.Status();if(H){break}}}}return H}};h.ItemTypes={AfterMarket:new m(1,"aftermarket","Auction",null,u.AfterMarket,"aftermarket",f.Auction).IsVisible(true),Available:new m(10,"available","Available",c.Available,u.Available,"available").IsVisible(true),Backorder:new m(3,"backorder","Backorder",null,[u.Backorder,u.BackorderService],"backorder",f.Backorder).IsVisible(true),CloseoutAuction:new m(2,"closeout","Aftermarket - Closeout",null,[u.AfterMarket],"aftermarket",f.Available).IsVisible(true),Location:new m(6,"location","Country/Location",c.Area,null,"available").IsVisible(true),Premium:new m(7,"premium","Premium",c.Premium,[u.Premium,u.PrivateSale],"premium").IsVisible(true),PreRegistration:new m(4,"preregistration","Pre-registration",null,u.PreRegistration,"preregistration").IsVisible(true),PrivateSale:new m(5,"privatesale","privatesale - Lead Generation",c.Premium,u.PrivateSale,"privatesale").IsVisible(true),Recent:new m(11,"recent","Recently Searched",c.Recent,null,"available").IsVisible(true),Recommended:new m(9,"recommended","Recommended",c.Recommended,null,"available").IsVisible(true),Stack:new m(1000,"stack","Stack","none","none","StackTemplate",f.Available).IsVisible(true),Unavailable:new m(13,"unavailable","Unavailable",c.Unavailable,[u.Unavailable,u.Unknown],"unavailable",f.Unavailable).IsVisible(true),Unknown:new m(14,"unknown","Unknown",null,[u.Unknown],"unavailable").IsVisible(true),Variations:new m(8,"spin","Variation",c.Variations,null,"available").IsVisible(true),BuyNowPreRegistration:new m(100,"preregistration","Pre-registration",null,u.PreRegistration,"preregistration").IsVisible(true),PremiumTeir:new m(15,"premiumteir","PremiumTeir",c.PremiumTeir,u.PremiumTeir,"premiumteir").IsVisible(true)};var i=function(z){var B=this;var w=ko.observable("");var x=ko.computed({read:function(){return B.Type().InitialAvailability||f.Available},deferEvaluation:true,owner:B},B);B.ActionTemplate=function(){return"ActionTemplate"+B.Availability()};B.Area=ko.observable(c.Unavailable);B.Availability=ko.observable(f.Available);B.CiCode=ko.observable(0);B.Extras=ko.observableArray([]);B.HidePricing=ko.computed({read:function(){return !B.ShowPricing()},deferEvaluation:true,owner:B},B);B.Id=ko.computed({read:function(){if(0===w().length){w((B.SLD()||"").toLowerCase()+(B.TLD()||"").toLowerCase())}return w()},deferEvaluation:true,owner:B},B);B.IsExpanded=ko.observable(false);B.IsExpandable=ko.computed({read:function(){return 0<B.Extras().length&&!B.Type.eq(h.ItemTypes.Backorder)&&!B.Type.eq(h.ItemTypes.CloseoutAuction)&&B.HasDbsModal()&&!B.IsCloseout()},deferEvaluation:true,owner:B},B);B.IsOnSale=ko.computed({read:function(){return B.Prices().CurrentPrice&&B.Prices().ListPrice},deferEvaluation:true,owner:B},B);B.IsSelected=ko.computed({read:function(){return f.Selected===B.Availability()},write:function(D){B.Availability(D?f.Selected:x())},deferEvaluation:true,owner:B},B);B.IsVisible=ko.observable(true);B.Other=ko.observableArray([]);B.Name=ko.computed({read:function(){return B.SLD()+"."+B.TLD()},deferEvaluation:true,owner:B},B);B.Phases=ko.observableArray([]);B.Prices=ko.observableArray([]);B.RegistrationInfo=ko.observable(null);B.SelectedPhase=ko.computed({read:function(){return ko.utils.arrayFirst(B.Phases(),function(D){return D.IsSelected()})},deferEvaluation:true,owner:B},B);B.ShowPricing=ko.computed({read:function(){return !B.IsSelected()},deferEvaluation:true,owner:B},B);B.SLD=ko.observable("");B.Stack=ko.observable(null);B.Status=ko.observable(u.Unknown);B.TemplateName=ko.computed({read:function(){return"DomainTemplate"+(B.Type()||h.ItemTypes.Unknown).TemplateName},deferEvaluation:true,owner:B},B);B.Type=ko.observable(h.ItemTypes.Unknown);B.TLD=ko.observable("");B.VendorId=ko.observable(11);B.ShowStack=ko.observable(false);B.fullAvailCheck=ko.observable(false);B.fullAvailCheckError=ko.observable(false);B.stackFullAvailCheck=ko.observable(false);B.stackFullAvailCheckError=ko.observable(false);B.IsPremiumPrice=ko.observable(false);function y(E,D){var F="";if(E&&D&&0<=D&&A(E)){F=b(h.Options.PostUrl,D);F=h.AppendQueryString(F,"domain="+encodeURIComponent(E.Name()));F=h.AppendQueryString(F,"domainstatus="+E.Status());F=E.Area()?h.AppendQueryString(F,"displayarea="+E.Area().Value):F;F=h.AppendQueryString(F,"bundle=domain");F=E.SelectedPhase()?h.AppendQueryString(F,"launchphase="+(E.SelectedPhase().SelectedSubPhase()||E.SelectedPhase()).Code()):F}return F}function C(D){var E=false;if(D){E=!D.Type.eq(h.ItemTypes.PreRegistration);if(!E){E=null!==D.SelectedPhase();if(E&&D.SelectedPhase().HasSubPhases()&&null===D.SelectedPhase().SelectedSubPhase()){alert("Please select your early access phase");E=false}else{if(!E){alert("Please select your phase")}}}}return E}function A(D){var E=null!==D;if(E){E=C(D)}return E}B.AddToCart=function(E,F){if(E){if("function"===typeof(LogFastballEvent)){LogFastballEvent(E.CiCode(),"searchresults","addtocart")}E.fullAvailCheck(true);var D=y(E,g.Add);if(D&&0<D.length){a.post(D,function(H){var G="undefined"===typeof(H.bidIsValid)||H.bidIsValid;if(H.Success&&G){E.fullAvailCheck(false);E.IsSelected(true);E.IsOnSale(false);h.ViewModel.SelectedDomains(H.CurrentlyPending);if(h.ViewModel.ShowStacks()){B.ShowStack(true)}}else{E.fullAvailCheck(false);E.fullAvailCheckError(true);E.IsOnSale(false)}})}}};B.Collapse=function(D,E){if(D){D.IsExpanded(false)}};B.Expand=function(D,E){if(D){var F=!D.IsExpanded();D.IsExpanded(F)}};B.RemoveFromCart=function(E,F){if(E){if("function"===typeof(LogFastballEvent)){LogFastballEvent(E.CiCode(),"searchresults","removefromcart")}var D=b(h.Options.PostUrl,g.Remove);D=h.AppendQueryString(D,"domain="+encodeURIComponent(E.Name()));a.post(D,function(G){if(G.Success){E.IsSelected(false);E.IsExpanded(false);if(E.Stack()&&E.Stack().IsSelected()){B.Stack().IsSelected(false);if(h.ViewModel.ExactMatch().Name()==B.Name()){E.ShowStack(true)}else{E.ShowStack(false)}}h.ViewModel.SelectedDomains(G.CurrentlyPending)}})}};B.SelectPhase=function(E,D){if(E&&-1<a.inArray(E,B.Phases())){if("function"===typeof(LogFastballEvent)){LogFastballEvent(E.CiCode,"searchresults","selectphase")}ko.utils.arrayForEach(B.Phases(),function(F){F.IsSelected(false).AreSubPhasesExpanded(false)});E.IsSelected(true)}};B.Load=function(F){if(F){B.SLD(F.DomainName||"").TLD(F.DomainTld||"");w(F.DomainIdentifier||B.SLD().toLowerCase()+B.TLD().toLowerCase());if(B.TLD()){var E=["com.au","net.au","org.au"];ko.utils.arrayForEach(E,function(Q){if(h.StringEndsWith(B.TLD().toLowerCase(),Q)){B.RegistrationInfo(new q());return false}})}if(F.IsPremiumPrice){B.IsPremiumPrice(true)}if(F.DomainStatus){B.Status("unknown"===F.DomainStatus.toLowerCase()||"transfer"===F.DomainStatus.toLowerCase()?u.Unavailable:F.DomainStatus.toLowerCase())}if(F.Stack&&(F.Stack.Prices!==null)){B.Stack(new t(F.Stack));B.Stack().Parent(B)}if(F.DisplayArea){var D=ko.utils.arrayFirst(h.ViewModel.Areas(),function(Q){return F.DisplayArea.toLowerCase()===(Q.Value||"").toLowerCase()});if("premiumheader"===F.DisplayArea.toLowerCase()){D=c.Premium}if(!D){D=new d(F.DisplayArea,null,F.DisplayArea,"000000").IsVisible(false)}B.Area(D)}if(F.Prices){a.each(F.Prices,function(Q){B.Prices()[Q]=h.StringEndsWith(F.Prices[Q],"/yr")?F.Prices[Q].slice(0,-3):F.Prices[Q]})}var P=[];a.each(h.ItemTypes,function(Q){P.push(h.ItemTypes[Q])});P=P.sort(function(Q,R){return(Q?Q.Priority:0)-(R?R.Priority:0)});var O=ko.utils.arrayFirst(P,function(Q){return Q.IsMatch(B)});B.Type(O||h.ItemTypes.Unknown);if(F.Other){if(F.Other.LaunchPhases){var G=null;for(var H=0;H<F.Other.LaunchPhases.length;H++){var L=new p(F.Other.LaunchPhases[H]).Parent(B);if(L.Template().IsSubPhase){G=(G||L).Template(p.TemplateInfos.Priority);G.SubPhases.push(new p(F.Other.LaunchPhases[H]).Name("Phase "+(L.Code().substr(2)||"1")).Parent(G));delete G.Prices()["ApplicationFee"];L=G}L.SubPhases.sort(function(Q,R){return new Date(Q?Q.EndDate():null)-new Date(R?R.EndDate():null)});if(0>a.inArray(L,B.Phases())){B.Phases.push(L)}}B.Phases.sort(function(Q,R){return(Q?Q.Index():0)-(R?R.Index():0)});var N=B.Phases()[0];if(G){var M=G.SubPhases()[0];B.Type().IsEarlyAccess=M&&M.LiveStartDateUtc.ltEq(new Date());if(B.Type().IsEarlyAccess){if(G!==B.Phases()[0]){var K=B.Phases.shift();G.SubPhases.push(K)}G.Name(h.Options.PhasePreRegName).Template(p.TemplateInfos.EarlyAccess);var J=G.SubPhases.shift();J.Name(p.TemplateInfos.EarlyAccessPriority.Title).Template(p.TemplateInfos.EarlyAccessPriority);B.Phases.unshift(J);N=G}G.SubPhases()[G.SubPhases().length-1].IsSelected(true)}if(N){N.IsSelected(true)}}a.each(F.Other,function(Q){B.Other[Q]=F.Other[Q]})}switch(B.Type()){case h.ItemTypes.AfterMarket:var I=B.Other.AuctionType&&"closeout"===B.Other.AuctionType;B.Type(I?h.ItemTypes.CloseoutAuction:h.ItemTypes.AfterMarket);break;default:break}B.Availability(B.Type().InitialAvailability);B.IsSelected(F.IsSelected)}};B.ShowDbs=function(D,E){showGetDomainsPopIn()};B.ShowPrivateSale=function(D,E){if(D){if("function"===typeof(LogFastballEvent)){LogFastballEvent(78160,"searchresults","domainbid")}a.get(h.Options.PCDataUrl,function(F){var G=h.Options.ContactInfoScriptUrl;var H="shopper="+F.pcShopperId+"&domainName="+encodeURIComponent(D.Name())+"&vendorId="+D.VendorId()+"&ci=72815&sre=hdnDPP_psm_value";G=G+"#i="+H;F.pcShopperId;require(["starfield/sf.dialog"],function(){a("<div />").sfDialog({autoResize:"true",load:G,titleHidden:false,overlayAlt:true,dialogHeightMin:120,onClose:D.IsSelected(true),title:"Congratulations! The domain you want is for sale."})})},"jsonp")}};B.Update=function(E,F){if(E&&E.IsSelected()){if("function"===typeof(LogFastballEvent)){LogFastballEvent(84311,"searchresults","updatedomain")}var D=y(E,g.Update);if(D&&0<D.length){a.post(D,function(G){if(G&&G.Success){E.IsExpanded(false)}})}}};B.UpdateCart=function(D,E){if(D){D.IsSelected()?D.RemoveFromCart(D,E):D.AddToCart(D,E)}};B.Load(z)};var l=function(A,G,z,E,B,C){var F=this;var w=ko.computed({read:function(){return ko.utils.arrayFilter(F.SubFilters(),function(H){return H.IsApplied()})},deferEvaluation:true},F);var x=B;var y=ko.observable(false);F.AllowClear=ko.observable(false);F.CiCodes={Apply:0,Clear:0,Collapse:0,Expand:0,Halt:0};F.IsApplied=ko.computed({read:function(){return y()||0<w().length},write:function(H){y(H)},deferEvaluation:true,owner:F},F);F.IsExpandable=ko.observable(true);F.IsExpanded=ko.observable(false);F.Title=ko.observable(G||"");F.Instruction=ko.observable(G);F.FilterType=ko.observable(z||k.And);F.Index=ko.observable(A||0);F.InitialValue=B;F.InputType=ko.observable(C||h.InputTypes.Textbox);F.IsExpanded=ko.observable(false);F.Predicate=ko.observable(E||function(H,I){return I===H});F.ShowTitle=ko.observable(true);F.SubFilters=ko.observableArray([]);F.Value=ko.observable(B);F.Apply=function(I,H){if(I){if(I.CiCodes){D(I.CiCodes.Apply,"applyfilter")}I.IsApplied(false).IsApplied(true)}};F.Clear=function(I,H){if(I){if(0<I.CiCodes){D(I.CiCodes.Clear,"clearfilter")}if(I.InputType.eq(h.InputTypes.Textbox)){I.Value(x)}if(0<I.SubFilters().length){ko.utils.arrayForEach(I.SubFilters(),function(J){J.Clear(J,H)})}I.IsApplied(false)}};F.Halt=function(I,H){if(I){if(I.CiCodes){D(I.CiCodes.Halt,"haltfilter")}I.IsApplied(false)}};F.ToggleApply=function(I,H){if(I){if(I.IsApplied()){I.Halt(I,H)}else{I.Apply(I,H)}}};F.ToggleExpansion=function(I,H){if(I){if(I.CiCodes){D(I.IsExpanded()?I.CiCodes.Collapse:I.CiCodes.Expand,I.IsExpanded()?"collapsefilter":"expandfilter")}I.IsExpanded(I.IsExpandable()&&!I.IsExpanded())}};var D=function(I,H){if("function"===typeof(LogFastballEvent)&&0<I&&""!==H){LogFastballEvent(I,"searchresults",H)}};F.IsSatisfiedBy=function(H){var J=false;if(H){J=F.Predicate().call(F,H,F.Value());if((!F.Value()||0===F.Value().length)||(J&&F.FilterType.eq(k.And))||(!J&&F.FilterType.eq(k.Or))){var K=w().sort(function(L,M){return(L?L.Index():0)-(M?M.Index():0)});var I=0;while(I<K.length&&((J&&K[I].FilterType.eq(k.And))||(!J&&K[I].FilterType.eq(k.Or)))){J=K[I].IsSatisfiedBy(H);I++}}}return J};F.GetSatisfyingItem=function(I){var H=null;if(I&&a.isArray(I)){H=F.GetAllSatisfyingItems(I)[0]}return H};F.GetAllSatisfyingItems=function(I){var H=[];if(I&&a.isArray(I)){H=ko.utils.arrayFilter(I,function(J){return F.IsSatisfiedBy(J)})}return ko.utils.arrayGetDistinctValues(H)}};var p=function(x){var y=this;var w=ko.observableArray([]);p.TemplateInfos={PreReg:{Prefixes:["GA"],Index:0,Name:"PreRegPhaseTemplate",Title:h.Options.PhasePreRegName},Priority:{Prefixes:["LR","EA"],Index:1,Name:"PriorityPhaseTemplate",Title:h.Options.PhasePriorityPreRegName},EarlyAccess:{Prefixes:["ER"],Index:1,Name:"EarlyAccessPhaseTemplate",Title:h.Options.PhasePriorityPreRegName,IsSubPhase:true},EarlyAccessPriority:{Prefixes:["EX"],Index:0,Name:"EarlyAccessPriorityPhaseTemplate",Title:h.Options.PhaseEarlyAccessPriorityPreRegName},Trademark:{Prefixes:["SR"],Index:2,Name:"TrademarkPhaseTemplate",Title:h.Options.PhaseTrademarkName}};y.AreSubPhasesExpanded=ko.observable(false);y.CiCode="000000";y.Code=ko.observable("");y.EndDate=ko.observable(new Date(8.64e+15));y.IsDefault=ko.observable(false);y.Index=ko.computed({read:function(){return y.Template().Index},deferEvaluation:true,owner:y},y);y.HasIcannFee=ko.observable(false);y.IsAppFeeRefundable=ko.observable(false);y.IsEqualRegRenewPrice=ko.observable(false);y.HasSubPhases=ko.computed({read:function(){return y.SubPhases()&&0<y.SubPhases().length},deferEvaluation:true,owner:y},y);y.IsExpanded=ko.observable(false);y.IsSelected=ko.observable(false);y.LiveStartDate=ko.observable(new Date(0));y.LiveStartDateUtc=ko.observable(new Date(0));y.Name=ko.observable("");y.Parent=ko.observable(null);y.Prices=ko.computed({read:function(){var z=w();if(y.HasSubPhases()){z=y.SubPhases()[y.SubPhases().length-1].Prices()}return z},write:function(z){w(a.isArray(z||[])?z||[]:[z])},deferEvaluation:true,owner:y},y);y.SelectedSubPhase=ko.computed({read:function(){return ko.utils.arrayFirst(y.SubPhases(),function(z){return z.IsSelected()})},deferEvaluation:true,owner:y},y);y.StartDate=ko.observable(new Date(0));y.SubPhases=ko.observableArray([]);y.ShowPricing=ko.computed({read:function(){return 0>=y.SubPhases().length},deferEvaluation:true,owner:y},y);y.ShowSubPhases=ko.computed({read:function(){return y.IsSelected()&&0<y.SubPhases().length},deferEvaluation:true,owner:y},y);y.Template=ko.observable(p.TemplateInfos.PreReg);y.Title=ko.observable("&nbsp;");y.Load=function(z){if(z){y.Code(z.Code).StartDate(z.StartDate).EndDate(z.EndDate).LiveStartDate(z.LiveStartDate||y.StartDate()).LiveStartDateUtc(new Date(z.LiveStartDate+" "+z.LiveStartTime||y.StartDate()+" "+z.StartTime));a.each(p.TemplateInfos,function(B){if(y.Code()&&2<=y.Code().length&&-1<a.inArray(y.Code().substring(0,2),p.TemplateInfos[B].Prefixes)){y.Template(p.TemplateInfos[B]);return false}});y.Name(y.Template().Title);y.IsExpanded(!y.Template.eq(p.TemplateInfos.Trademark));if(z.IsAppFeeRefundable){y.IsAppFeeRefundable(z.IsAppFeeRefundable)}if(z.IsEqualRegRenewPrice){if(z.Prices.DomainRegList==z.Prices.DomainRenewList){y.IsEqualRegRenewPrice(z.Prices.DomainRegList)}else{y.IsEqualRegRenewPrice([z.Prices.DomainRegList,z.Prices.DomainRenewList])}}if(z.HasIcannFee){y.HasIcannFee(z.HasIcannFee)}if(z.Prices){a.each(z.Prices,function(B){y.Prices()[B]=h.StringEndsWith(z.Prices[B],"/yr")?z.Prices[B].slice(0,-3):z.Prices[B]})}if(z.SubPhases){for(var A in z.SubPhases){y.SubPhases.push(new p(z.SubPhases[A]).Parent(y))}}y.SubPhases.sort(function(B,D){var C=new Date(B?B.EndDate():null),E=new Date(D?D.EndDate():null);return C-E})}};y.SelectSubPhase=function(A,z){if(A&&-1<a.inArray(A,y.SubPhases())){if("function"===typeof(LogFastballEvent)){LogFastballEvent(A.CiCode,"searchresults","selectsubphase")}ko.utils.arrayForEach(y.SubPhases(),function(B){B.IsSelected(false)});A.IsSelected(true);y.ToggleSubPhases(y,z);if(y.IsSelected()&&y.Parent()&&y.Parent().IsSelected()&&"function"===typeof(y.Parent().Update)){y.Parent().Update(y.Parent())}}};y.ToggleExpansion=function(A,z){if(A){if("function"===typeof(LogFastballEvent)){LogFastballEvent("000000","searchresults","showphasedetails")}A.IsExpanded(!A.IsExpanded())}};y.ToggleSubPhases=function(A,z){if(A){A.AreSubPhasesExpanded(!A.AreSubPhasesExpanded())}};y.Load(x)};var q=function(){var w=this;w.ModalContent=ko.observable("");w.Show=ko.observable(false);w.ShowModal=function(A,x){var y=a("#serp-reglenmodal");if(0===y.length){y=a("<div id='serp-reglenmodal'></div>")}if(0>=w.ModalContent().length){var z=h.Options.RegistrationUrl;z=h.AppendQueryString(z,"TargetDivId=serp-reglenmodal");a.ajax({url:z,async:false,success:function(B){w.ModalContent(B.Html);y.html(B.Html)}})}w.Show(true);y.modal({overlayId:"g-modal-overlay",close:"true",autoPosition:"true"})}};var r=function(y){var z=this;var w=[];z.AppliedFilters=ko.computed({read:function(){return ko.utils.arrayFilter(z.Filters(),function(B){return B.IsApplied()})},deferEvaluation:true,owner:z},z);z.Areas=ko.observableArray([]);z.AreMoreAvailable=ko.computed({read:function(){return 0<z.TotalItems()&&z.CurrentVisible()<z.TotalItems()},deferEvaluation:true,owner:z},z);z.CanGoToNextStep=ko.computed({read:function(){var B=(0<z.SelectedDomains()||(z.ExactMatch()&&(z.ExactMatch().Type.eq(h.ItemTypes.Available)||z.ExactMatch().Type.eq(h.ItemTypes.Premium)||z.ExactMatch().Type.eq(h.ItemTypes.Location)||z.ExactMatch().Type.eq(h.ItemTypes.PreRegistration))));return B},deferEvaluation:true,owner:z},z);z.CurrentVisible=ko.observable(10);z.ExactMatch=ko.observable(null);z.Filters=ko.observableArray([]);z.AllItems=ko.computed({read:function(){var B=w||[];return B},deferEvaluation:true,owner:z},z);z.Items=ko.computed({read:function(){var D=w||[];var B=z.AppliedFilters();if(B){for(var C=0;C<B.length;C++){D=B[C].GetAllSatisfyingItems(D)}}z.TotalItems(D.length);if(z.CurrentVisible()<D.length){D=D.slice(0,z.CurrentVisible())}return D},deferEvaluation:true,owner:z},z);z.IsLoaded=ko.observable(false);z.IsValid=ko.observable(true);z.NotValid=ko.observable(false);z.IsBlocked=ko.observable(true);z.Unavailable=ko.observable(true);z.SelectedCount=ko.observable(0);z.SelectedDomains=ko.observable(0);z.ShowExactMatch=ko.computed({read:function(){return z.IsValid()&&z.ExactMatch()&&!z.ExactMatch().Type.eq(h.ItemTypes.Backorder)&&u.Unavailable!==z.ExactMatch().Status()},deferEvaluation:true,owner:z},z);z.ShowCCTld=ko.computed({read:function(){return z.IsValid()&&z.ExactMatch()&&!z.ExactMatch().Type.eq(h.ItemTypes.PreRegistration)},deferEvaluation:true,owner:z},z);z.ShowStacks=ko.observable(true);z.TotalItems=ko.observable(w.length);z.TypedValue=ko.observable("");z.TypedTLD=ko.observable("");z.ApplyFilter=function(C,B){if(C){if(0<C.CiCode&&"function"===typeof(LogFastballEvent)){LogFastballEvent(C.CiCode,"searchresults","applyfilter")}z.CurrentVisible(10);C.IsApplied(true)}};z.CloseProductLimitations=function(C,B){if("function"===typeof(LogFastballEvent)){LogFastballEvent("000000","searchresults","closelimits")}a.modal.close()};z.Load=function(C){z.IsLoaded(false).IsValid(false);z.Unavailable(false);z.IsBlocked(false);if(C&&C.Success){z.IsBlocked(C.InvalidType==="blocked");z.NotValid(C.HeaderResult===v&&C.Tld!=="");z.IsValid(C.Valid).SelectedDomains(C.CurrentlyPending);a.each(c,function(J){z.Areas.push(c[J])});if(C.Name){z.TypedValue(C.Name)}if(C.Tld){z.TypedTLD(C.Tld)}if(C.StripMallResult){var H=[];var G=4;ko.utils.arrayForEach(C.StripMallResult,function(J){var K=new i(J).CiCode(84304);w.push(K);H.push(K.TLD());G=K.Name().length>G?K.Name().length:G});var E=z.Filters();var D=new l(2,"Extensions").InputType(h.InputTypes.None).AllowClear(true).IsExpanded(true);var I=["com","co","info","org","net","me","mobi","us","biz"];H=ko.utils.arrayGetDistinctValues(H).sort();I=ko.utils.arrayFilter(I,function(J){return -1!==a.inArray(J,H)});H=ko.utils.arrayFilter(H,function(J){return -1===a.inArray(J,I)});H=I.concat(H);ko.utils.arrayForEach(ko.utils.arrayGetDistinctValues(H),function(J){var K=new l(D.SubFilters().length,"."+J,k.Or,function(L,M){return L.TLD.eq(M)},J,h.InputTypes.Checkbox).ShowTitle(false).IsExpandable(false).IsExpanded(true);K.CiCodes=h.Options.Filters[2].CiCodes;D.SubFilters.push(K)});E.push(D);E.push(new l(0,"Price",k.And,function(J,K){return isNaN(parseInt(K,10))||K>=parseFloat((J.Prices().CurrentPrice||J.Prices().ListPrice||"0").replace(/&#{0,1}[a-z0-9]+;/ig,"").replace(/[^\d\.\,\-\ ]/g,""))}).AllowClear(true).IsExpanded(true).ShowTitle(true).Instruction("Enter a maximum price"));E.push(new l(1,"Characters Length",k.And,function(J,K){return isNaN(parseInt(K,10))||0===K||K>=J.SLD().length},G).InputType(h.InputTypes.Slider).IsExpanded(true));E.push(new l(3,"Country/Location",k.And,function(J,K){return J.Type.eq(K)},h.ItemTypes.Location,h.InputTypes.Checkbox).ShowTitle(false).IsExpanded(true).IsExpandable(false));E.push(new l(4,"Premium",k.And,function(J,K){return J.Type.eq(K)},h.ItemTypes.Premium,h.InputTypes.Checkbox).ShowTitle(false).IsExpanded(true).IsExpandable(false));E=E.sort(function(J,K){return(J?J.Index():0)-(K?K.Index():0)});a.each(E,function(J){E[J].Title(h.Options.Filters[J].Title).Instruction(h.Options.Filters[J].Instruction||h.Options.Filters[J].Title);E[J].CiCodes=h.Options.Filters[J].CiCodes});z.Filters(E)}if(C.HeaderResult){z.Unavailable(C.HeaderResult.DisplayArea==="dppsr_extnd_unavail");z.ExactMatch(new i(C.HeaderResult).CiCode(84310));var B=null;if(C.HeaderCcTldResult&&!z.ExactMatch().Type.eq(h.ItemTypes.PreRegistration)){B=new i(C.HeaderCcTldResult);var F=ko.utils.arrayFirst(w,function(J){return J.Id.eq(B.Id())});if(F){F.Other(B.Other)}B=F||B}z.ExactMatch().CCTLDResult=ko.observable(B);if(z.ExactMatch().Stack){z.ExactMatch().ShowStack(true)}}z.IsLoaded(true)}};z.GoToNextStep=function(){if(!z.CanGoToNextStep()){return false}if(0>=z.SelectedDomains()&&z.ExactMatch()&&u.AfterMarket!==z.ExactMatch().Status()){a.ajaxSetup({async:false});z.ExactMatch().AddToCart(z.ExactMatch())}var B=b(h.Options.PostUrl,g.GetNextStep);a.post(B,function(C){if(C.Success){if("function"===typeof(LogFastballEvent)){LogFastballEvent(13673,"searchresults","continue")}if(C.NextStep===5){alert("Select a Domain First")}else{window.location=C.NextStepUrl}}})};z.ShowAll=function(){if("function"===typeof(LogFastballEvent)){LogFastballEvent("000000","searchresults","showall")}z.CurrentVisible(z.TotalItems())};z.ShowMore=function(B){if("function"===typeof(LogFastballEvent)){LogFastballEvent(84348,"searchresults","showmore")}if(isNaN(B)||0>=B){B=z.CurrentVisible()+10}B=z.TotalItems()>B?B:z.TotalItems();z.CurrentVisible(B)};z.ShowProductLimitations=function(C,B){if("function"===typeof(LogFastballEvent)){LogFastballEvent(84168,"searchresults","showlimits")}a("#g-modal").modal({overlayId:"g-modal-overlay",close:false,autoPosition:true})};function x(F,E,B){var D=F;if(F&&E&&(0<B)){for(var C=0;C<B&&0<E.length;C++){D.splice(D.length,0,E[0]);E.splice(0,1)}}return D}function A(D){var G=D;if(z.ExactMatch()){var I=a.grep(D,function(K){return c.Recommended===K.Area()});var H=a.grep(D,function(K){return c.Variations===K.Area()});var E=a.grep(D,function(K){return c.Premium===K.Area()});var F=ko.utils.arrayFilter(D,function(K){return -1===a.inArray(K,I)&&-1===a.inArray(K,H)&&-1===a.inArray(K,E)});var J=[];var B=c.Unavailable!==z.ExactMatch().Area();var C=c.Unavailable===z.ExactMatch().Area();if(z.ShowExactMatch()&&B){do{x(J,I,3);x(J,H,1);x(J,E,1)}while(0<I.length||0<H.length||0<E.length)}else{I=I.filter(function(K){return c.Unavailable!==K.Area()&&u.Unavailable!==K.Status()&&u.Backorder!==K.Status()});H=H.filter(function(K){return c.Unavailable!==K.Area()&&u.Unavailable!==K.Status()&&u.Backorder!==K.Status()});E=E.filter(function(K){return c.Unavailable!==K.Area()&&u.Unavailable!==K.Status()&&u.Backorder!==K.Status()});do{x(J,I,4);x(J,H,4);x(J,E,2)}while(0<I.length||0<H.length||0<E.length);F=F.filter(function(K){return c.Unavailable!==K.Area()&&u.Unavailable!==K.Status()&&u.Backorder!==K.Status()});if(!z.ShowExactMatch()){F=F.filter(function(K){return u.Area!==K.Status()})}}if(0<J.length){a.merge(J,F);G=J}}return G}z.Load(y)};var t=function(y){var z=this;ko.utils.extend(z,new i(y));var x=ko.computed({read:function(){return ko.utils.arrayFilter(z.Domains(),function(A){return A.IsSelected()})||[]},deferEvaluation:true,owner:z},z);z.Domains=ko.observableArray([]);z.Parent=ko.observable(null);z.OfferName=ko.observable(y.OfferSld+"."+y.OfferTld);z.IsSelected=ko.computed({read:function(){return f.Selected===z.Availability()},write:function(A){ko.utils.arrayForEach(z.Domains(),function(B){B.IsSelected(A).IsExpanded(false)});if(A&&(h.ViewModel.ExactMatch().Name()===z.OfferName())){h.ViewModel.ExactMatch().IsSelected(true).IsExpanded(false)}else{if(A){z.Availability(f.Selected)}else{z.Availability(f.Available)}}},deferEvaluation:true,owner:z},z);z.IsVisible(false);z.SavingsText=ko.observable("");z.Type=ko.observable(h.ItemTypes.Stack);z.stackFullAvailCheck=ko.observable(false);z.stackFullAvailCheckError=ko.observable(false);var w=ko.computed(function(){var A=z.Domains().length===x().length&&h.ViewModel.ExactMatch();z.Availability(A?f.Selected:z.Type().InitialAvailability)},z);z.AddToCart=function(D,B){if(D){if("function"===typeof(LogFastballEvent)){LogFastballEvent(z.CiCode(),"searchresults","addstack")}D.stackFullAvailCheck(true);var E=z.Domains().length-x().length;var C=b(h.Options.PostUrl,g.AddStack);var A=h.AppendQueryString(C,"domain="+encodeURIComponent(D.OfferName()));a.post(A,function(F){if(F.Success){D.stackFullAvailCheck(false);D.IsSelected(true);D.Parent().IsSelected(true);h.ViewModel.SelectedDomains(F.CurrentlyPending);if(D.OfferName()!==h.ViewModel.ExactMatch().Name()){h.ViewModel.ExactMatch().ShowStack(false)}ko.utils.arrayFirst(h.ViewModel.AllItems(),function(G){if(G.Stack()&&!(G.Stack().OfferName()===D.OfferName())){ko.utils.arrayForEach(D.Domains(),function(H){if(H.Id()===G.Id()){G.IsSelected(true)}})}});h.ViewModel.ShowStacks(false)}else{D.stackFullAvailCheck(false);D.stackFullAvailCheckError(true)}})}};z.Load=function(A){z.Type(h.ItemTypes.Stack);if(A){z.CiCode(84309);z.SavingsText(A.SavingsText);var B=A.OfferSld;var C=A.DotTypesText.split(",");ko.utils.arrayForEach(C,function(D){var E=new i(A).SLD(B).TLD(D.toLowerCase());E=ko.utils.arrayFirst(h.ViewModel.Items(),function(F){return F.Id.eq(E.Id())})||E;z.Domains.push(E)})}z.IsVisible(0<z.Domains().length);z.GetDomainsCount=ko.computed(function(){if(0<z.Domains().length&&z.Domains().length==3){return h.Options.threeName}else{if(0<z.Domains().length&&z.Domains().length==2){return h.Options.twoName}else{return z.Domains().length}}},z)};z.RemoveFromCart=function(C,B){if(C){var A=b(h.Options.PostUrl,g.RemoveStack);A=h.AppendQueryString(A,"domain="+encodeURIComponent(C.OfferName()));a.post(A,function(D){if(D.Success){C.IsSelected(false);h.ViewModel.SelectedDomains(D.CurrentlyPending);if(C.OfferName()!==h.ViewModel.ExactMatch().Name()){h.ViewModel.ExactMatch().ShowStack(true)}ko.utils.arrayFirst(h.ViewModel.AllItems(),function(E){if(E.Stack()&&!(E.Stack().OfferName()===C.OfferName())){ko.utils.arrayFirst(C.Domains(),function(F){if(F.Id()===E.Id()){E.ShowStack(false)}});E.IsSelected(false)}});h.ViewModel.ShowStacks(true)}})}};z.Update=function(C,B){if(C){if("function"===typeof(LogFastballEvent)){LogFastballEvent(84312,"searchresults","updatestack")}var A=b(h.Options.PostUrl,g.UpdateStack);A=h.AppendQueryString(A,"bundle=domain");a.post(A,function(D){if(D&&D.Success){C.Expanded(false)}})}};z.Load(y)};var o=function(){var w=this;w.CartUrl="";w.ContactInformationScriptUrl="";w.GetUrl="";w.PostUrl="";w.RegistrationUrl="";w.ItemAddedMsgTitle="Domain Added";w.ItemAddedMsgText=w.ItemAddedMsgTitle;w.ItemsAddedMsgText=w.ItemAddedMsgText;w.ItemUpdatedMsgTitle="Domain Updated";w.ItemUpdatedMsgText=w.ItemUpdatedMsgTitle;w.ItemsUpdatedMsgText=w.ItemUpdatedMsgText;w.ItemRemovedMsgTitle="Domain Removed";w.ItemRemovedMsgText=w.ItemRemovedMsgTitle;w.ItemsRemovedMsgText=w.ItemRemovedMsgText;w.GeneralErrorMsgTitle="An error occured";w.GeneralErrorMsgText=w.GeneralErrorMsgTitle;w.BundleAddedMsgTitle=w.ItemAddedMsgTitle;w.BundleAddedMsgText=w.ItemAddedMsgText;w.AuctionAddedMsgTitle=w.ItemAddedMsgTitle;w.AuctionAddedMsgText=w.ItemAddedMsgText;w.PhasePreRegName="Pre-registration";w.PhasePriorityPreRegName="Priority Pre-registration";w.PhaseTrademarkName="Trademark Owners";w.PhaseEarlyAccessPriorityPreRegName="Buy Nowxxx"};h.Options=new o(null);h.ViewModel=new r();h.Init=function(x){h.Options=a.extend({},h.Options,x||{});a.ajaxSetup({cache:false});var w=h.AppendQueryString(h.Options.GetUrl,"area=all");a.post(w,function(y){if(y.Success){h.ViewModel.Load(y);ko.applyBindings(h.ViewModel);s();n()}else{if(y.Redirect){window.location=y.Redirect}}})};h.AppendQueryString=function(y,w){var x="?";if(y.indexOf("?")>=0){x="&"}return y+x+w};h.BreakString=function(z,w){var x=z;if(x&&w<x.length){var y=x.match(new RegExp(".{1,"+w+"}","g"));x=y.join("<br />")}return x};h.StringEndsWith=function(w,x){return w.indexOf(x,w.length-x.length)!==-1};h.StringStartsWith=function(x,w){x=x||"";if(w.length>x.length){return false}return x.substring(0,w.length)===w};function e(){a("#results .searchbox #domain_search_input").change(function(w){j(w)}).keyup(function(w){j(w)})}function j(w){if(h.ViewModel.TypedValue()&&0<h.ViewModel.TypedValue().length){a("#results .searchbox .searchbox-btn").removeClass("flt-btn-inactive").click(function(x){searchresultsheader_js.validateTLD();searchresultsheader_js.validateAndSearch()})}}function n(){var w=a("#results #search");w.wrap("<div id='search-wrapper' />");var x=a("#results #search-wrapper");x.waypoint({handler:function(z,y){if("down"===y){x.css({height:w.outerHeight()});w.stop().addClass("sticky").css}else{x.css({height:"auto"});w.stop().removeClass("sticky")}},offset:function(){return 0}})}function s(){if(h.ViewModel.TypedValue()&&0<h.ViewModel.TypedValue().length){a("#domain_search_input").val(h.ViewModel.TypedValue()+(0<h.ViewModel.TypedTLD().length?"."+h.ViewModel.TypedTLD():""));a("#domain_search_input_label").hide();a("#results .searchbox .searchbox-btn").addClass("flt-btn-inactive").attr("onclick","");e()}}function b(y,w){var A=y.indexOf("?");if(A==-1){A=y.length}var z=y.substr(0,A);var x=y.substr(A,y.length);return z+w+x}}(window.DomainSearchResults=window.DomainSearchResults||{},jQuery));