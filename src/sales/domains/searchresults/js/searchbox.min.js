gbl.ns.register("domains.controls");if(!domains.controls.cds_search){domains.controls.cds_search=function(){var k={},j={$doc:$(document),$domainSearchInput:$("#domain_search_input"),$domainToCheckHdn:$("#domainToCheck"),$domainSearchForm:$("#domain_search_form"),$searchboxBtn:$(".searchbox-search.searchbox-btn"),searchUrl:"http://fullpath.com/domains/actions/searchhandler.ashx",searchCompleteEvt:"domains.controls.cds_search.searchCompleteEvt",isSearchResultsPage:false,fastballFn:function(){},btnInactiveClass:"flt-btn-inactive"},f=this;function i(l){window.console&&window.console.log&&window.console.log(l)}function h(l){window.console&&window.console.dir&&window.console.dir(l)}function g(m,l){if(l.length==0){m("Enter a domain name to search.");return false}return true}function e(l){if(l.length>0){alert(l);return}}function b(){if($.isFunction(k.fastballFn)){k.fastballFn()}c()}function c(){k.$searchboxBtn.addClass(k.btnInactiveClass).attr("onclick","").unbind("click")}function a(){if(k.isSearchResultsPage===false){k.$searchboxBtn.removeClass(k.btnInactiveClass)}k.$searchboxBtn.click(f.ValidateAndDoSearch);k.$domainSearchInput.keypress(function(l){if(l.which===13){l.preventDefault();f.ValidateAndDoSearch();return false}if(k.isSearchResultsPage===true){k.isSearchResultsPage=false;k.$searchboxBtn.removeClass(k.btnInactiveClass)}})}function d(l){a();if(l){if(l.Success){if(l.NextStepUrl!=null&&l.NextStepUrl.length>0){if(pathIsDeals2()){window.location=addQueryParam(l.NextStepUrl,"path","deals2")}else{window.location=l.NextStepUrl}}else{if(l.Warnings!=null){var m="";$.each(l.Warnings,function(n){m+=l.Warnings[n]+"\\n"});e(m)}}}}}f.Initialize=function(l){k=$.extend({},j,l);a()};f.ValidateAndDoSearch=function(){var l=k.$domainSearchInput.val();if(l.length){if(g(e,l)){k.$domainToCheckHdn.val(l);b();$.ajax({url:k.searchUrl,type:"POST",data:k.$domainSearchForm.serialize(),error:function(p,o,n){var m={Error:n,Success:false};d(m)},success:function(m){d(m)}})}}return false}}}var searchClient=new domains.controls.cds_search();function pathIsDeals2(){if(getQueryParams()["path"]!==undefined){return getQueryParams()["path"]==="deals2"}else{return false}}function getQueryParams(){var e=window.location.href;var c={};var d=(e.substr(e.indexOf("?")+1,e.length)).split("&");for(var a=0;a<d.length;a++){var b=d[a].split("=");c[b[0]]=b[1].replace("#","")}return c}function addQueryParam(b,a,c){return b+(b.indexOf("?")!==-1?"&":"?")+a+"="+c};