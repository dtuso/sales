include ./panel.jade

mixin carouselItem(itemOptions)
  - itemOptions = itemOptions || {};
  - itemOptions.textCenter = itemOptions.textCenter || false;
  .item
    .item-wrapper(class= "#{itemOptions.textCenter ? 'text-center' : ''}")
      .carousel-panel.container(data-icode="#{itemOptions.icode ? icode : ''}")
        block

mixin carousel(id, numberOfPanels, options)

  - options = options || {};
  - options.autoRotateSpeed = options.autoRotateSpeed || false;
  - options.backgroundColor = options.backgroundColor || "bg-pro-gray";

  if(options.css)
    style
        include:css ./styles/carousel.css
  .carousel-wrap
    .carousel-container.container
      .carousel.slide(id=id data-ride="carousel" data-interval="#{options.autoRotateSpeed}")

        if (numberOfPanels > 1)
          ol.carousel-indicators
            - for (var index = 0; index < numberOfPanels; index++)
              li(data-target="#"+id data-slide-to="#{index}")

        .carousel-inner
          block

        - var arrowType = "icon"
        if (options.backgroundColor !== 'bg-pro-gray')
          - arrowType = "white-icon"

        if (numberOfPanels > 1)
          a.left.carousel-control(href="#"+id data-slide="prev")
            span.carousel-icon(class="arrow-left-#{arrowType}")
          a.right.carousel-control(href="#"+id data-slide="next")
            span.carousel-icon(class="arrow-right-#{arrowType}")
      script.
        $('.carousel .carousel-indicators li:first-child').addClass("active");
        $('.carousel .carousel-inner .item:first-child').addClass("active");